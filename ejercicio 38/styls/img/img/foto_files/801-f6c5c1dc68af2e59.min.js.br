"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e1cd4591-6217-5c4b-b8c1-0e461f668d85")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[801],{105193:(e,t,a)=>{a.d(t,{a0:()=>i,bV:()=>r,jy:()=>l,sk:()=>s,xC:()=>n,xO:()=>o});let n="browse_explore_list--widgetTilesGridContainer--k7aKh browse_widgets_view--widgetTilesGridContainer--t5-lL",l="browse_explore_list--seeAll--8L87Q text--fontPos13--xW8hS text--_fontBase--QdLsd",r="browse_explore_list--sectionHeader--vkmM0 text--fontPos13--xW8hS text--_fontBase--QdLsd",i="browse_explore_list--categorySectionHeaderContainer--WiX1N",o="browse_explore_list--pluginCategorySectionHeaderPadding--hW6gC",s="browse_explore_list--resourcesGrid--BGQAu"},594816:(e,t,a)=>{a.d(t,{$I:()=>h,D5:()=>m,EQ:()=>v,MY:()=>f,Mm:()=>b,Mo:()=>o,ON:()=>l,X6:()=>s,Y:()=>w,hW:()=>n,jE:()=>r,n_:()=>E,pz:()=>i,rb:()=>u,sk:()=>g,vC:()=>c,w0:()=>_,wP:()=>d,xQ:()=>p});let n="browse_templates_modal--figjamModalAnimated--DZYbi",l="browse_templates_modal--searchBar--XLS5K",r="browse_templates_modal--modalContent--xJKzJ",i="browse_templates_modal--sidebar--Ay4f5",o="browse_templates_modal--unselectedSidebarItem--8k5Hx browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",s="browse_templates_modal--selectedSidebarItem--riSyU browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",c="browse_templates_modal--figmaCuratedHeading--NrYwZ browse_templates_modal--sidebarItem--kyE1B browse_templates_modal--sidebarText--lcSPj text--fontPos13--xW8hS text--_fontBase--QdLsd",m="browse_templates_modal--communitySidebarContainer--otHCt",d="browse_templates_modal--linkIcon--DOZfF",u="browse_templates_modal--mainContent---sUBI",p="browse_templates_modal--categoryPreviewRow--wRxQO",_="browse_templates_modal--categoryPreviewHeader---gWg3",h="browse_templates_modal--categoryPreviewTitle--xg13c text--fontPos13--xW8hS text--_fontBase--QdLsd",g="browse_templates_modal--resourcesGrid--Y-fVk",E="browse_templates_modal--hoverOverlay--sFj3y",f="browse_templates_modal--teamTemplatesHeaderButton--n6rDU",b="browse_templates_modal--bgLoading--Sz6so",v="browse_templates_modal--bgLoadingLight--Yl6dc",w="browse_templates_modal--bgLoadingLightest--9ceKP"},197713:(e,t,a)=>{a.d(t,{a:()=>l,t:()=>n});let n="auth_iframe_external_options",l="google_one_tap_login"},353489:(e,t,a)=>{a.d(t,{_:()=>u,o:()=>p});var n=a(188507);if(443==a.j)var l=a(846995);var r=a(301929),i=a(517048),o=a(287139),s=a(917756),c=a(931119),m=a(876560),d=a(812925);let u="import";function p({newFileFrom:e,isUpdatedOmnicreateConfig:t,disabled:a,isTeamLocked:u,targetFolderId:p,dataOnboardingKey:_}){let h=(0,n.wA)(),g=(0,s.Yz)()(!!u),E=a?l.lQ:()=>{p&&h(o.gN(p)),h((0,c.L)())},f=a?(0,r.t)("locked_team.label.tooltip"):void 0,b=a?m.Ib.TEXT:void 0;return{newFileFrom:e,disabled:!!a||g,onClick:E,dataTooltip:f,dataTooltipType:b,displayText:(0,r.t)("file_browser.folder.import"),dataTestId:"file-import-button",dataOnboardingKey:_,isUpdatedOmnicreateConfig:t,key:d.D.IMPORT,listOptionType:i.R.IMPORT}}},365126:(e,t,a)=>{a.d(t,{D:()=>v,n:()=>b});var n=a(844882),l=a(353489),r=a(846995),i=a(301929),o=a(517048),s=a(338941),c=a(917756),m=a(193772),d=a(876560),u=a(812925),p=a(751303),_=a(546619),h=a(848507),g=a(132786),E=a(75557),f=(e=>(e.NEW_SLIDES_FILE="NEW_SLIDES_FILE",e))(f||{});function b(e){let t=(0,h.rs)({unwrapResult:!0}),a=(0,E.sy)(t?.tier),l=(0,n.Rs)(_.zCd,{projectId:e},{enabled:!!e}).transform(({project:e})=>e);return{isLoading:"loading"===l.status,canCreateDesignFile:!!l.data?.canCreateDesignFile,canCreateFigjamFile:!!l.data?.canCreateFigjamFile,canCreateSlidesFile:!!l.data?.canCreateSlidesFile,canShowCreateSitesFile:a}}function v({newDesignActionProps:e,newFigjamActionProps:t,newSlidesActionProps:a,newSitesActionProps:n,newCooperActionProps:_,importActionProps:h}){let E=function({newFileFrom:e,isUpdatedOmnicreateConfig:t,disabled:a,isTeamLocked:n,showRequestLabel:l,showRequestSentLabel:p}){let _=(0,s.$)(m._Y.DESIGN,e,"toolbar_design_created"),h=(0,c.Yz)()(!!n),g=a?r.lQ:_,E=a?(0,i.t)("locked_team.label.tooltip"):void 0,f=a?d.Ib.TEXT:void 0;return{newFileFrom:e,disabled:!!a||h||!!p,onClick:g,dataTooltip:E,dataTooltipType:f,displayText:(0,i.t)("file_browser.tool_bar.new_design_file"),dataTestId:"new-design-file-button",isUpdatedOmnicreateConfig:t,editorThemeMode:"design",key:u.D.NEW_FILE,listOptionType:o.R.DESIGN,showRequestSentLabel:p,showRequestLabel:l}}(e),f=function({newFileFrom:e,isUpdatedOmnicreateConfig:t,disabled:a,isTeamLocked:n,showRequestLabel:l,showRequestSentLabel:p}){let _=(0,s.$)(m._Y.WHITEBOARD,e,"toolbar_figjam_created"),h=(0,c.Yz)()(!!n),g=a?r.lQ:_,E=a?(0,i.t)("locked_team.label.tooltip"):void 0,f=a?d.Ib.TEXT:void 0;return{newFileFrom:e,disabled:!!a||h||!!p,onClick:g,dataTooltip:E,dataTooltipType:f,displayText:(0,i.t)("file_browser.tool_bar.new_figjam_board"),dataTestId:"new-whiteboard-file-button",isUpdatedOmnicreateConfig:t,editorThemeMode:"whiteboard",key:u.D.NEW_WHITEBOARD_FILE,listOptionType:o.R.WHITEBOARD,showRequestSentLabel:p,showRequestLabel:l}}(t),b=function({newFileFrom:e,isUpdatedOmnicreateConfig:t,disabled:a,isTeamLocked:n,showRequestLabel:l,showRequestSentLabel:u}){let p=(0,s.$)(m._Y.SLIDES,e,"toolbar_slides_created"),_=(0,c.Yz)()(!!n),h=a?(0,i.t)("locked_team.label.tooltip"):void 0,g=a?d.Ib.TEXT:void 0,E=a?r.lQ:p;return{newFileFrom:e,disabled:!!a||_||!!u,onClick:E,dataTooltip:h,dataTooltipType:g,displayText:(0,i.t)("file_browser.tool_bar.new_slide_deck"),dataTestId:"new-slides-file-button",isUpdatedOmnicreateConfig:t,editorThemeMode:"piper",key:"NEW_SLIDES_FILE",listOptionType:o.R.SLIDES,showRequestSentLabel:u,showRequestLabel:l}}(a);return{newDesignActionComponentProps:E,newFigjamActionComponentProps:f,newSlidesActionComponentProps:b,newSitesActionComponentProps:(0,g.lt)(n),newCooperActionComponentProps:(0,p.XT)(_),newImportActionComponentProps:(0,l.o)(h)}}},895204:(e,t,a)=>{a.d(t,{Q4:()=>C,gE:()=>I,u5:()=>T});var n=a(196302),l=a(975123),r=a(136189),i=a(474474),o=a(719900),s=a(515017),c=a(301929),m=a(996481),d=a(325202),u=a(24059),p=a(292506),_=a(791143),h=a(514479),g=a(486306),E=a(561594),f=a(781505),b=a(870307),v=a(204430),w=a(279159);async function y(e,t,a,n,l,r){let o=[],s=null;if((0,i.kc)().ps_benchmark)try{s=await (0,g.nm)(!0)(a),o=(0,E.F)(n,t,s)}catch(t){let e=t?.data?.message||(0,c.t)("file_browser.error_try_again");a(d.F.enqueue({message:e,type:"error"}))}else o=(0,E.F)(n,t,{plansByUserId:{},teams:[],orgs:[]});let m=(n.authedActiveCommunityProfile?.associated_users??[]).filter(e=>e.user_id in n.authedUsers.byId).length>1;if(o.length>1||m){let a=(0,p.JJ)(t.viewer_mode);e({onSelectWorkspace:l,workspaces:o.map(e=>(0,_.y)(e,a,n,s,r)),mode:"new_file"})}else(0,i.kc)().ps_benchmark?l(o[0]):l()}let I=(e,t={isFreemiumPreview:!1,adminReviewerOverride:!1})=>a=>async(c,d)=>{let p=d();await y(e,a,c,p,function(e){let d={headers:{...s.Ay.defaults.headers}},_={};e&&(d.headers["X-Figma-User-ID"]=e.userId,_.org_id=e.orgId,(0,i.kc)().ps_benchmark&&(_.team_id=e.teamId)),!0===t.adminReviewerOverride&&(_.admin_reviewer_override=!0),s.Ay.post(`/api/hub_files/v2/${a.id}/copy`,_,d).then(({data:i})=>{let s=i.meta,d=(0,v.m3)(a),g=!0!==d?"none":!0===t.isFreemiumPreview?"trial":"paid";(0,n.sx)(h.M5.HUB_FILE_DUPLICATED,{hubFileId:a.id,figFileKey:s.key,isMonetized:d,paidStatus:g,searchSessionId:(0,u.w)(p),file_team_id:_.team_id,org_id:_.org_id,file_folder_id:s.folder_id}),"whiteboard"===s.editor_type&&c((0,m.Hx)({storeInRecentsKey:w.$A.FigJam,id:a.id,type:w.vt.CommunityResource}));let E=(0,f.to)(s);E=(0,l.dR)(E,{"is-community-duplicate":"1",fuid:e?.userId||""}),!0===t.isFreemiumPreview&&(E=(0,l.dR)(E,{"is-freemium-preview":"1"})),r.Ay.redirect(E,o.rr?void 0:"_blank")})})},T=e=>t=>async(a,n)=>{let i=n();await y(e,t,a,i,function(e){let a=`/slides/new?slide-template-library-key=${t.library_key}`;e&&((0,b.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),a=(0,l.dR)(a,{fuid:e.userId})),r.Ay.redirect(a,o.rr?void 0:"_blank")})},C=e=>t=>async(a,n)=>{let i=n();await y(e,t,a,i,function(e){let a=`/file/new?library-hub-file-id=${t.id}`;e&&((0,b.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),a=(0,l.dR)(a,{fuid:e.userId})),r.Ay.redirect(a,o.rr?void 0:"_blank")},!0)}},935604:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(188507),l=a(196302),r=a(895204),i=a(201508),o=a(492841),s=a(204430),c=a(24059);function m(e,t=!1){let a=(0,n.wA)(),d=(0,c.J)();if(!(0,s.U)(e))return()=>{};let u=r.gE(t=>{(0,l.sx)("try_it_out_drafts_picker_menu_opened",{hubFileId:e.id,searchSessionId:d}),a((0,o.to)({type:i._,data:{payload:t}}))},{isFreemiumPreview:t});return()=>{a(u(e))}}},751303:(e,t,a)=>{function n(){return null}a.d(t,{Vq:()=>l,XT:()=>r,_U:()=>i});let l=n,r=()=>null,i=n},892322:(e,t,a)=>{a.d(t,{Q:()=>g,S:()=>E});var n=a(684595),l=a(93395),r=a(237798),i=a(515017),o=a(281318),s=a(301929),c=a(325202),m=a(546619),d=a(811235),u=a(700237),p=a(157815),_=a(478166),h=a(287139);let g=(0,_.nF)(async(e,t,{loadingKey:a})=>{let i=!1;try{i=!!(0,l.oA)((await (0,n.Ek)(m.jmg,{fileKey:t.file_key})).deviceTryFile)}catch(e){(0,r.x1)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let n;n=i?p.L.claimDeviceFile({fileKey:t.file_key}):u.Uy.claimTryFile({fileKey:t.file_key}),(0,d.N)(n,e,a);let{data:l}=await n,{save_location:r,folder_name:o,org_id:m}=l.meta,{user:_,currentUserOrgId:g,selectedView:E}=e.getState(),f=(0,s.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===r&&o&&(f=(0,s.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:o})),m&&m!==g&&_){let t={userId:_.id,orgId:m};e.dispatch(h._l({workspace:t,view:E}))}e.dispatch(c.F.enqueue({message:f}))}catch(t){e.dispatch(o.s.error("Unable to save file. Please try again later."))}}),E=(0,_.nF)(async(e,{userName:t,file_key:a},{loadingKey:n})=>{try{await i.Ay.put(`/api/try/file/${a}`,{name:(0,s.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},338941:(e,t,a)=>{a.d(t,{$:()=>d});var n=a(411855),l=a(188507),r=a(415684),i=a(754468),o=a(964520),s=a(686644),c=a(878206),m=a(767164);function d(e,t,a,d,u,p){let _=(0,o.B)(d),h=(0,l.wA)(),g=(0,s.TA)(),E=(0,l.d4)(e=>{let t=d?e.folders[d]:void 0;return t&&t.team_id?e.teams[t.team_id]:void 0});return(0,n.useCallback)(n=>{h((0,m.zE)({state:_,editorType:e,team:E,from:t,openNewFileIn:p||(0,r.oJ)(n)?c.ai.NEW_TAB:c.ai.SAME_TAB,folderId:u?d:void 0,callback:e=>{(0,i.Cu)({userId:g,fileKey:e},a)}}))},[a,h,e,d,E,u,p,t,_,g])}},382441:(e,t,a)=>{a.d(t,{LP:()=>d,qQ:()=>n,qv:()=>u});var n,l=a(411855),r=a(196302),i=a(474474),o=a(821550),s=a(301929),c=a(19294),m=a(193772);let d="cover";var u=(e=>(e.COMPONENT_PUBLISHING="component_publishing",e.VIDEO="video",e.PASSWORD_PROTECTION="password_protection",e.AUDIO="audio",e.UNLIMITED_PAGES="unlimited_pages",e.PROTOTYPE_ONLY_LINKS="prototype_only_links",e.OPEN_SESSIONS="open_sessions",e.UNLIMITED_PROJECTS="unlimited_projects",e.PRIVATE_PROJECTS="private_projects",e.UNLIMITED_FILES="unlimited_files",e))(u||{});let p={cover:{onboardingKey:d,imgSrc:(0,i.ck)("cade95b7d3141da5e4c22a879de339d5b57b05aa"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.pro.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.pro.description")),hoverTitle:null},password_protection:{onboardingKey:"password_protection",imgSrc:(0,i.ck)("b56379c61007d4c119dc3a32fc936ac07f5d13d5"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.password.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.password.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.password.hover_text"))},component_publishing:{onboardingKey:"component_publishing",imgSrc:(0,i.ck)("1138b4f97bb51f61ed9b2bac008de9038dfbcf75"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.library.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.library.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.library.hover_text"))},audio:{onboardingKey:"audio",imgSrc:(0,i.ck)("312167c9a97cd378f0a20d09d03376b27283dae9"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.audio.hover_text"))},open_sessions:{onboardingKey:"open_sessions",imgSrc:(0,i.ck)("1ee3e88ccb237a207e896dba4a67af081259590d"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.jam.hover_text"))},unlimited_pages:{onboardingKey:"unlimited_pages",imgSrc:(0,i.ck)("cdb490f97220f8598d6b342c873569c68ac2370e"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.unlimited_pages.hover_text"))},video:{onboardingKey:"video",imgSrc:(0,i.ck)("0e9be58e80f8d577fc4b1028f07a903bca68c970"),header:l.createElement(c.E,{fontSize:13,fontWeight:"medium"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.video.title")),description:l.createElement(c.E,{fontSize:11,color:"secondary"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.video.description")),hoverTitle:l.createElement(c.E,{fontSize:12,fontWeight:"semi-bold"},(0,s.tx)("help_widget.pro_trials.stack_of_cards_widget.video.hover_text"))}},_={component_publishing:"seen_pro_onboarding_component_publishing_overlay",video:"seen_pro_onboarding_video_overlay",password_protection:"seen_pro_onboarding_password_protection_overlay",audio:"seen_pro_onboarding_audio_overlay",unlimited_pages:"seen_pro_onboarding_unlimited_pages_overlay",prototype_only_links:"seen_pro_onboarding_prototype_only_links_overlay",open_sessions:"seen_pro_onboarding_open_sessions_overlay",unlimited_files:"seen_pro_onboarding_unlimited_files_overlay",unlimited_projects:"seen_pro_onboarding_unlimited_projects_overlay",private_projects:"seen_pro_onboarding_private_projects_overlay"};(e=>{e.ACTIVELY_TRIGGERED_ONBOARDING_BLOCKED_EVENT_ID="Pro Trials V3: Actively Triggered Onboarding Blocked",e.getOnboardingStepUserFlag=function(e){return _[e]},e.getOnboardingStepTrackingContext=function(e){return`Pro Trials V3 Onboarding: ${(0,o.vE)(e)}`},e.getOnboardingStepTriggerEventId=function(e){return`triggered_pro_trials_v3_${e}_onboarding`},e.trackActivelyTriggeredOnboardingStepBlocked=function(t,a){(0,r.sx)(e.ACTIVELY_TRIGGERED_ONBOARDING_BLOCKED_EVENT_ID,{blockedOnboardingFeature:a,blockingOverlayId:t})},e.getOnboardingCardsStackContentProps=function({editorType:e,isVoiceEnabled:t,isWorkshopModeEnabled:a}){let n=[d,"password_protection","component_publishing","unlimited_pages","video"];t&&n.push("audio");let l=[d,"password_protection"];return t&&l.push("audio"),a&&l.push("open_sessions"),(({[m._Y.DESIGN]:n,[m._Y.SLIDES]:n,[m._Y.SITES]:n,[m._Y.COOPER]:n,[m._Y.WHITEBOARD]:l})[e]||[]).map(e=>p[e])}})(n||(n={}))},74689:(e,t,a)=>{a.d(t,{c:()=>u,y:()=>p});var n=a(411855),l=a(136189),r=a(474474),i=a(997562),o=a(301929),s=a(249064),c=a(778566),m=a(661788),d=a(683119);class u extends n.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.timer=null,this.controller=new AbortController,this.payload=null,this.fetchScheduledDowntimeInfo=async()=>{let e=this.controller?.signal,t=(0,r.ck)("011a24693cd9b63ea5492d50d7713dfb7ed18ea6"),a=await fetch(t,{signal:e,cache:"no-cache"}),n=await a.json(),l={finished:n.finished,warningDurationMs:Number(n.warning_ms),notifDurationMs:Number(n.notif_ms),pollIntervalMinutes:Number(n.poll_interval_minutes),downtimeStartDate:new Date(n.timestamp+" UTC"),minLengthMinutes:Number(n.estimated_length_min),maxLengthMinutes:Number(n.estimated_length_max),helpcenterUrl:n.helpcenter_url};return(0,r.kc)().display_downtime_banner_force&&(l.warningDurationMs*=1e3,l.notifDurationMs*=1e3),"hostname"in n&&(l={...l,renderOnHostname:n.hostname}),l},this.onTick=()=>{null!=this.payload&&this.props.dispatch(m.Z.onTick({payload:this.payload,hostname:window.location.hostname,currentTimeMs:Date.now()}))},this.poll=async()=>{for(;this._isMounted;)try{let e=await this.fetchScheduledDowntimeInfo();this._isMounted&&(this.payload=e,this.timer||(this.onTick(),this.timer=setInterval(this.onTick,3e4)))}catch(e){"AbortError"!==e.name&&console.warn(e)}finally{let e=this.payload&&60*this.payload.pollIntervalMinutes||900;await (0,i.fm)(1e3*e)}}}componentDidMount(){this._isMounted=!0,this.poll()}componentWillUnmount(){this._isMounted=!1,this.controller?.abort(),this.timer&&clearInterval(this.timer)}render(){return null}}function p(e){let{dispatch:t,downtime:a}=e,i=n.useCallback(e=>()=>{t(e)},[t]),u=n.useCallback((e,t)=>()=>{l.Ay.unsafeRedirect(e,"_blank"),i(t)},[i]),p=n.useCallback(e=>(0,o.t)("downtime_banner.ongoing.figma_will_be_entering_a_maintenance_period",{minutes:e}),[]),_=n.useMemo(()=>(0,o.t)("downtime_banner.ongoing.currently_undergoing_maintenance"),[]),h=n.useRef(e.notifications),g=n.useCallback(()=>{h.current.length>0&&t(c.Q.dequeue({type:s._.DOWNTIME}))},[t,h]);return n.useEffect(()=>{let{payload:e,status:n,hidingDowntimeNotif:l,notifMinutesRemaining:o}=a;if((0,r.kc)().display_downtime_banner){switch(n){case d.A.Imminent:case d.A.Warning:if(e&&null!=o&&l!==d.y.warningHidden){let a=p(o),n=u(e.helpcenterUrl,m.Z.hideWarningNotif()),l=i(m.Z.hideWarningNotif());t(c.Q.dequeue({type:s._.DOWNTIME})),t(c.Q.enqueue({notification:{type:s._.DOWNTIME,message:a,acceptCallback:n,dismissCallback:l}}))}break;case d.A.Ongoing:if(e&&l!==d.y.ongoingHidden){let a=u(e.helpcenterUrl,m.Z.hideOngoingNotif()),n=i(m.Z.hideOngoingNotif());t(c.Q.dequeue({type:s._.DOWNTIME})),t(c.Q.enqueue({notification:{type:s._.DOWNTIME,message:_,acceptCallback:a,dismissCallback:n}}))}break;case d.A.Finished:g()}return()=>{g()}}},[a,t,p,u,i,_,g]),null}u.displayName="DowntimePoller"},595316:(e,t,a)=>{a.d(t,{Z:()=>eW});var n,l=a(411855),r=a(689570),i=a(719900),o=a(117746),s=a(667130),c=a(912675),m=a(748581),d=a(438476),u=a(193772),p=a(204430),_=a(35356),h=a(41655),g=a(582914),E=a(188507),f=a(196302),b=a(462132),v=a(496833),w=a(292506),y=a(879656),I=a(412041),T=a(624286),C=a(516090),S=a(976667),k=a(64051),F=a(671633),N=a(727466),x=a(591032),L=a(536825),A=a(927457),R=a(846995),O=a(454475),M=a(868869),P=a(819539),D=a(171946),B=a(603275),W=a(579557),U=a(301929),G=a(325202),z=a(935604),H=a(946276),V=a(819635),j=a(287139),Z=a(876560),$=a(739664),Y=a(500440),Q=a(33650),K=a(486416),q=a(543072),J=a(112512),X=a(720248),ee=a(671250),et=a(349307),ea=a(179544),en=a(98285),el=a(539954);(e=>{let t;e.BottomRightContainer=function({children:e}){return l.createElement("div",{className:q.Vl},e)},e.BottomLeftContainer=function({children:e}){return l.createElement("div",{className:q.Ci},e)},e.ButtonContainer=l.forwardRef(function({children:e},t){return l.createElement("div",{ref:t,className:q.bS},e)}),e.Divider=function(){return l.createElement("div",{className:q.w5})},e.FullscreenButton=function({toggleFullscreen:e,isFullscreen:t}){return l.createElement("div",{className:q.Y5},l.createElement(D.B,{svg:t?ee.A:X.A,onClick:e,className:q.xw,title:t?(0,U.t)("community.hub_file_viewer.collapse_file_preview"):(0,U.t)("community.hub_file_viewer.expand_file_preview"),ariaLabel:t?(0,U.t)("community.hub_file_viewer.collapse_file_preview"):(0,U.t)("community.hub_file_viewer.expand_file_preview"),role:"img",dataTestId:"hub-file-viewer-fullscreen-icon"}))},e.GetFreePreviewButton=function(e){let t=(0,z.A)(e.hubFile,!0);return l.createElement(c.fu,{name:$.e0.COMMUNITY_HUB_FILE_GET_FREE_PREVIEW_BUTTON},l.createElement(c.$z,{onClick:t,dataTestId:"community-get-free-preview-button",className:q.GW},(0,U.tx)("community.buyer.get_free_preview")))};let a="HUB_FILE_EMBED_PAGES_BUTTON_DROPDOWN_TYPE";function n(e,t,a,n){let r=l.useCallback(a=>n=>{n?.stopPropagation(),(0,f.sx)("Hub File Viewer Zoom In",{hubFileId:e,source:a}),t(2,C.UG)},[e,t]);return{adjustZoomInFactory:r,adjustZoomOutFactory:l.useCallback(a=>n=>{n?.stopPropagation(),(0,f.sx)("Hub File Viewer Zoom Out",{hubFileId:e,source:a}),t(.5,C.UG)},[e,t]),setZoomFactory:l.useCallback((t,n)=>l=>{l?.stopPropagation(),(0,f.sx)("Hub File Viewer Set Zoom",{hubFileId:e,scale:t,source:n}),a(t,C.UG)},[e,a]),resetZoomToFitCanvasContentFactory:l.useCallback(t=>a=>{a?.stopPropagation(),(0,f.sx)("Hub File Viewer Zoom To Fit",{hubFileId:e,source:t}),n()},[e,n])}}e.PagesButton=function(e){let t=(0,E.wA)(),n=(0,E.d4)(e=>e.dropdownShown),r=n?.type===a,i=e.pages&&e.pages.length>1;if(l.useEffect(()=>{i&&setTimeout(()=>{t(j.mT({type:a}))},1e3)},[]),!i)return null;let o=e.pages.find(t=>t.id===e.currentPageId),s=o?.name||e.pages[0]?.name,c=s?l.createElement(l.Fragment,null,(0,U.tx)("community.hub_file_viewer.page_name",{pageHeader:l.createElement("span",{className:q.Z7},(0,U.t)("community.hub_file_viewer.page")),pageName:s})):(0,U.t)("community.hub_file_viewer.pages");return l.createElement("div",{className:r?q.Sm:q.ir,role:"button",tabIndex:0,onClick:e=>{if(e.stopPropagation(),r){t(V.oB());return}t(V.j7({type:a}))},onMouseDown:e=>e.stopPropagation()},l.createElement("div",{className:q._f},c),l.createElement("div",{className:q.dN},l.createElement(D.B,{svg:J.A,className:q.OW,title:(0,U.t)("community.hub_file_viewer.view_file_pages"),ariaLabel:(0,U.t)("community.hub_file_viewer.view_file_pages"),role:"img"})))},e.PagesDropdown=function(e){let t=(0,E.wA)(),n=(0,E.d4)(e=>e.dropdownShown?.type===a),r={maxHeight:`${e.viewerHeight-120}px`},i=a=>{a&&(e.setCurrentPageId(a),t(H.UU()),(0,f.sx)("Hub File Viewer Change Page",{hubFileId:e.hubFile.id,pageId:a}))};return n?l.createElement(O.ms,{className:q.Oe,style:r,recordingKey:"hub_file_embed_pages_dropdown"},e.pages.map(t=>l.createElement(O.rr,{key:t.id,checked:e.currentPageId===t.id,onClick:e=>{e.stopPropagation(),i(t.id)}},l.createElement("div",{className:q.VM},t.name)))):null},e.HubFileZoomButton=function(t){let a=(0,E.wA)(),i=(0,E.d4)(e=>e.dropdownShown?.type===r),{adjustZoomInFactory:o,adjustZoomOutFactory:s}=n(t.hubFile.id,t.adjustZoom,t.setZoom,t.resetZoomToFitCanvasContent),c=Math.round(100*t.currentZoomScale),m=c.toString().length;return l.createElement(l.Fragment,null,l.createElement(N.K,{"aria-label":(0,U.t)("fullscreen_actions.zoom-out"),onClick:s("clickFromViewerButtons"),htmlAttributes:{"data-tooltip-type":Z.Ib.LOOKUP,"data-tooltip":(0,U.t)("fullscreen_actions.zoom-out")}},l.createElement(B.U,{svg:et.A,fallbackSvg:ea.A},l.createElement(L.O,null))),l.createElement(e.Divider,null),l.createElement("div",{className:i?q.hF:q.f5,style:{width:m<3?"66px":"82px"},role:"button",tabIndex:0,onClick:e=>{if(e.stopPropagation(),i){a(V.oB());return}a(V.j7({type:r}))}},(0,U.tx)("community.hub_file_viewer.zoom_percent",{zoomPercent:c}),l.createElement("div",{className:q.dN},l.createElement(D.B,{svg:J.A,className:q.OW,title:(0,U.t)("community.hub_file_viewer.select_zoom_level"),ariaLabel:(0,U.t)("community.hub_file_viewer.select_zoom_level"),role:"img"}))),l.createElement(e.Divider,null),l.createElement(N.K,{"aria-label":(0,U.t)("fullscreen_actions.zoom-in"),onClick:o("clickFromViewerButtons"),htmlAttributes:{"data-tooltip-type":Z.Ib.LOOKUP,"data-tooltip":(0,U.t)("fullscreen_actions.zoom-in")}},l.createElement(B.U,{className:q.sy,svg:en.A,fallbackSvg:el.A},l.createElement(A.e,null))))};let r="HUB_FILE_EMBED_ZOOM_BUTTON_DROPDOWN";(e=>{e.clickFromDropdown="clickFromDropdown",e.clickFromViewerButtons="clickFromViewerButtons",e.keyboardShortcut="keyboardShortcut",e.userInput="userInput"})(t||(t={})),e.HubFileZoomButtonDropdown=function({hubFile:e,currentZoomScale:t,adjustZoom:a,setZoom:i,resetZoomToFitCanvasContent:o}){let s=(0,E.wA)(),{adjustZoomInFactory:c,adjustZoomOutFactory:m,setZoomFactory:d,resetZoomToFitCanvasContentFactory:u}=n(e.id,a,i,o),p=l.useCallback(e=>{document.activeElement instanceof HTMLInputElement||("+"===e.key?c("keyboardShortcut")():"-"===e.key?m("keyboardShortcut")():"0"===e.key?d(1,"keyboardShortcut")():"1"===e.key&&u("keyboardShortcut")())},[c,m,u,d]);if((0,T.U3)("keydown",p),!(0,E.d4)(e=>e.dropdownShown?.type===r))return null;let _=t=>{t.endsWith("%")&&(t=t.substr(0,t.length-1));let a=-1;try{a=parseInt(t,10)}catch(e){}a>0&&((0,f.sx)("Hub File Viewer User Input Zoom Set",{hubFileId:e.id,source:"userInput",scale:a/100}),i(a/100,C.UG))};return l.createElement(O.ms,{className:q.tj,recordingKey:"hub_file_embed_zoom_dropdown"},l.createElement(O.c$,{className:q.zj},l.createElement(M.p,{className:q.OF,placeholderValue:`${Math.round(100*t)}%`,submit:e=>{_(e),s(V.oB())},cancel:R.lQ})),l.createElement(O.wv,null),l.createElement(O.c$,{onClick:c("clickFromDropdown")},(0,U.tx)("community.hub_file_viewer.zoom_in"),l.createElement(P.S,{shortcut:"+",className:q.K8})),l.createElement(O.c$,{onClick:m("clickFromDropdown")},(0,U.tx)("community.hub_file_viewer.zoom_out"),l.createElement(P.S,{shortcut:"-",className:q.K8})),l.createElement(O.c$,{onClick:u("clickFromDropdown")},(0,U.tx)("community.hub_file_viewer.zoom_to_fit"),l.createElement(P.S,{shortcut:"1",className:q.K8})),l.createElement(O.c$,{onClick:d(.5,"clickFromDropdown")},(0,U.tx)("community.hub_file_viewer.zoom_to",{percent:"50%"})),l.createElement(O.c$,{onClick:d(1,"clickFromDropdown")},(0,U.tx)("community.hub_file_viewer.zoom_to",{percent:"100%"}),l.createElement(P.S,{shortcut:"0",className:q.K8})),l.createElement(O.c$,{onClick:d(2,"clickFromDropdown")},(0,U.tx)("community.hub_file_viewer.zoom_to",{percent:"200%"})))},e.PrototypeZoomButton=function(e){let t=(0,E.wA)(),a=(0,E.d4)(e=>e.dropdownShown?.type===Q.A9),n=1;return e.viewer&&(n=e.getCurrentZoomScale()),l.createElement(x.E,{className:W.cx.bgTransparent.h100.$,onClick:e=>{if(e.stopPropagation(),a){t(V.oB());return}t(V.j7({type:Q.A9}))}},l.createElement("div",{className:a?q.hF:q.f5},(0,U.tx)("community.hub_file_viewer.zoom_percent",{zoomPercent:Math.round(100*n)}),l.createElement("div",{className:q.dN},l.createElement(D.B,{svg:J.A,className:q.OW,title:(0,U.t)("community.hub_file_viewer.select_zoom_level"),ariaLabel:(0,U.t)("community.hub_file_viewer.select_zoom_level"),role:"img"}))))},e.PrototypeZoomDropdown=function(e){let t=(0,E.wA)(),a=(0,E.d4)(e=>e.dropdownShown?.type===Q.A9),n=e.viewer.getPrototypeDeviceType(),r=(0,C._Q)(n),[i,o]=l.useState(()=>e.initialScalingMode??{viewportScalingMode:(0,C.qb)(r),contentScalingMode:"fixed"}),s=l.useCallback(t=>{let a={...i,...t.scalingInfo};o(a),e.viewer?.setScalingMode(a)},[e.viewer,i]),c=l.useCallback(e=>{if("z"===e.key||"Z"===e.key){if(document.activeElement instanceof HTMLInputElement)return;let a=(0,K.Pz)(n),l=(0,K.Ac)(i,a),r=a.findIndex(e=>e.scalingOptionId===l);-1===r?r=e.shiftKey?a.length-1:0:e.shiftKey?0===r?r=a.length-1:r--:r===a.length-1?r=0:r++;let o=a[r];s(o),t(G.F.clearAll()),t(G.F.enqueue({message:(0,U.t)("community.hub_file_viewer.zoom",{percent:(0,K.GP)(o.scalingOptionId)})}))}},[t,n,i,s]);return((0,T.U3)("keydown",c),a)?l.createElement(Y.j,{showPoint:!1,dispatch:t,onSelectItem:e=>e.callback?.(),parentRect:e.targetRect,items:(0,Q.NC)(t,i,K.Yu.DEFAULT,void 0,n,s),className:q.J2}):null}})(n||(n={}));let er=e=>{let t=l.useCallback((t,a=C.UG)=>{e?.port1.postMessage({type:F.cu.ADJUST_ZOOM,params:{scale:t,animationDuration:a}})},[e]),a=l.useCallback((t,a=C.UG)=>{e?.port1.postMessage({type:F.cu.SET_ZOOM,params:{scale:t,animationDuration:a}})},[e]);return{adjustZoom:t,setZoom:a,setCurrentPageId:l.useCallback(t=>{e?.port1.postMessage({type:F.cu.SET_CURRENT_PAGE_ID,params:{currentPageId:t}})},[e]),setCanvasSpaceCenter:l.useCallback((t,a=C.UG)=>{e?.port1.postMessage({type:F.cu.SET_CANVAS_SPACE_CENTER,params:{location:t,animationDuration:a}})},[e]),resetZoomToFitCanvasContent:l.useCallback(()=>{e?.port1.postMessage({type:F.cu.RESET_ZOOM_TO_FIT_CANVAS_CONTENT})},[e])}},ei=e=>{let[t,a]=l.useState(1);return l.useEffect(()=>{if(!e)return;let t=e=>{e.data.viewerState?.viewport?.zoomScale&&a(e.data.viewerState.viewport.zoomScale)};return e.port1.addEventListener("message",t),e.port1.start(),()=>e.port1.removeEventListener("message",t)},[e]),t},eo=(e,t)=>{let a=l.useRef(S.t4),[n,r]=l.useState([]),[i,o]=l.useState(k.VL);return l.useEffect(()=>{if(!t)return;let l=t=>{t.viewport&&(a.current=function(e,t){let a=t.current?.getBoundingClientRect();return a?{x:0,y:0,width:a.width,height:a.height,offsetX:e.offset.x,offsetY:e.offset.y,zoomScale:e.zoomScale,isPanning:!1,isZooming:!1}:S.t4}(t.viewport,e)),t.pages&&(0===n.length&&t.pages[0]?.id&&o(t.pages[0].id),r(t.pages)),t.currentPageId&&o(t.currentPageId)},i=e=>{e.data.viewerState&&l(e.data.viewerState)};return t.port1.addEventListener("message",i),t.port1.start(),()=>t.port1.removeEventListener("message",i)},[e,t,n.length]),l.useMemo(()=>({getViewportInfo:()=>a.current,pages:n,currentPageId:i}),[n,i])},es=(e,t)=>{let{onMouseUp:a,onMouseDown:n,onMouseMove:r,onKeydown:i}=t,o=l.useCallback(e=>{if(e.data.canvasInteraction){let t=e.data.canvasInteraction.type,l=e.data.canvasInteraction.pt;"canvasMouseDown"===t?n(l):"canvasMouseUp"===t?a(l):("canvasMouseDrag"===t||"canvasMouseMove"===t)&&r(l)}else e.data.keydown&&i(e.data.keydown.key)},[n,r,a,i]);l.useEffect(()=>(e?.port1.addEventListener("message",o),e?.port1.start(),()=>e?.port1.removeEventListener("message",o)),[o,e?.port1])},ec=e=>{let[t,a]=l.useState("auto");return l.useEffect(()=>{e&&e.port1.postMessage({type:F.cu.SET_CURSOR_STYLE,params:{cursorStyle:t}})},[t,e]),a};function em(e){let{hubFile:t,onLoad:a,isFullscreen:n,showFullscreenComments:r,fixedSize:i}=e,c=(0,E.wA)(),[m,d]=l.useState(!1),[h,g]=l.useState(!1),C=l.useRef(null),S=l.useRef(null),{adjustZoom:k,setZoom:N,setCurrentPageId:x,setCanvasSpaceCenter:L,resetZoomToFitCanvasContent:A}=er(S.current),R=e.showFullscreenComments&&e.isFullscreen,{getViewportInfo:O,pages:M,currentPageId:P}=eo(C,S.current);l.useEffect(()=>{S.current?.port1.postMessage({type:F.cu.SET_COMMENT_MODE,params:{showFullscreenComments:r}})},[r]);let D=l.useCallback(()=>{h||(S.current=new MessageChannel,C.current?.contentWindow?.postMessage({type:"TRANSFER_MESSAGE_PORT"},"*",[S.current.port2]),g(!0))},[h,C]),B=l.useCallback(e=>{S.current?.port1.postMessage({type:F.cu.SET_SCROLL_TO_PAN,params:{scrollToPan:e}})},[]);l.useEffect(()=>{B(n)},[n,B]),l.useEffect(()=>{let e=e=>{"LOAD_FINISHED"===e.data&&(D(),B(!!n),d(!0),a?.())};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[P,n,L,x,B,O,a,D]);let W=l.useCallback(t=>{let a;t?.stopPropagation(),(0,f.sx)("Hub File Viewer Toggle Fullscreen",{hubFileId:e.hubFile.id,source:"click"}),a=e.isFullscreen?_.G4.DEFAULT:_.G4.FULLSCREEN,c(s.sW(a))},[c,e.hubFile,e.isFullscreen]),U=l.useRef(null),G=l.useCallback(e=>{U.current=e,R&&I.lS.handleMouseDown(e.x,e.y)},[R]),z=ec(S.current),H=l.useCallback(t=>{R?I.lS.handleMouseUp(t.x,t.y):(!e.disableClickToExpand||!e.disableFullscreen)&&U.current&&b.Mi.distance(t,U.current)<y.wB&&!n&&W(),U.current=null},[R,n,W,e.disableClickToExpand,e.disableFullscreen]),V=l.useCallback(e=>{R&&I.lS.handleMouseMove(e.x,e.y)},[R]),j=l.useCallback(e=>{"Escape"===e&&c(s.sW(_.G4.DEFAULT))},[c]),Z=l.useCallback(e=>{j(e.key)},[j]);es(S.current,{onMouseUp:H,onMouseDown:G,onMouseMove:V,onKeydown:j}),(0,T.U3)("keydown",Z);let $=t.viewer_mode===u.y4.PROTOTYPE;l.useEffect(()=>{$||z("grab")},[$,z]);let Y=$?`/community/file/${t.id}/embed`:`/embed?embed_host=hub_file_detail_view&community_viewer=true&hub_file_id=${t.id}&hide_ui=true`,Q=(0,p.m3)(t),K=(0,v.I)(t),J=(0,o.QQ)(K);return l.createElement("div",{className:q.Nb},l.createElement("div",{className:q.MI},!$&&m&&l.createElement(ed,{getViewportInfo:O,pages:M,currentPageId:P,setCurrentPageId:x,adjustZoom:k,setZoom:N,setCanvasSpaceCenter:L,resetZoomToFitCanvasContent:A,toggleFullscreen:W,hubFile:t,isFreemiumPreview:Q&&!J,isFullscreen:n,commentsIsActive:r,disableComments:e.disableComments,disableFullscreen:e.disableFullscreen,iframeRef:C,messageChannel:S.current}),l.createElement("iframe",{title:"Hub file iframe viewer",height:"100%",width:i?"100%":(0,w.zS)(m),src:Y,allowFullScreen:!0,ref:C})),l.createElement("div",{className:e.isFullscreen&&e.showFullscreenComments?q.Qp:q._A}))}function ed(e){let t=ei(e.messageChannel);return l.createElement(l.Fragment,null,e.isFreemiumPreview?l.createElement(n.BottomLeftContainer,null,l.createElement(n.ButtonContainer,null,l.createElement(n.GetFreePreviewButton,{hubFile:e.hubFile}))):l.createElement(l.Fragment,null,l.createElement(n.PagesDropdown,{viewerHeight:e.getViewportInfo().height,pages:e.pages,hubFile:e.hubFile,currentPageId:e.currentPageId,setCurrentPageId:e.setCurrentPageId}),"whiteboard"!==e.hubFile.viewer_mode&&e.pages.length>1&&l.createElement(n.BottomLeftContainer,null,l.createElement(n.ButtonContainer,null,l.createElement(n.PagesButton,{pages:e.pages,currentPageId:e.currentPageId})))),l.createElement(n.HubFileZoomButtonDropdown,{hubFile:e.hubFile,currentZoomScale:t,adjustZoom:e.adjustZoom,setZoom:e.setZoom,resetZoomToFitCanvasContent:e.resetZoomToFitCanvasContent}),l.createElement(n.BottomRightContainer,null,l.createElement(n.ButtonContainer,null,l.createElement(n.HubFileZoomButton,{hubFile:e.hubFile,adjustZoom:e.adjustZoom,setZoom:e.setZoom,resetZoomToFitCanvasContent:e.resetZoomToFitCanvasContent,currentZoomScale:t})),!e.disableFullscreen&&l.createElement(n.ButtonContainer,null,l.createElement(n.FullscreenButton,{isFullscreen:e.isFullscreen,toggleFullscreen:e.toggleFullscreen}))))}var eu=a(55253),ep=a(922827),e_=a(975123),eh=a(136189),eg=a(474474),eE=a(448682),ef=a(519204),eb=a(805364),ev=a(515017),ew=a(219956),ey=a(121303),eI=a(445381),eT=a(7600),eC=a(899356),eS=a(677124),ek=a(379945),eF=a(234241),eN=a(132540),ex=a(23966),eL=a(172413);let eA=e=>e?{backgroundColor:eT.F.format(e)}:{};function eR(e){let t=l.useRef(new ey.Se).current,[a,n]=l.useState(null),r=eb.ur("PROTOTYPE",a,{workerURL:Fig.tsViewerWorkerURL,scrollToPan:e.isFullscreen,featureFlags:(0,eg.kc)(),trackingSessionId:(0,eg.tl)().tracking_session_id||null,bowser:i.Ay,forceMobileOptimizations:null!=eE.qg(eh.Ay.location.search)["mobile-optimizations"],deviceInfoByIdentifier:eI.hY,trackAnalyticsEvent:f.sx,definedAnalyticsHandler:f.az,appTimerStart:e=>{"rendererDraw"===e&&t.handleDocumentRenderStart()},appTimerStop:e=>{"rendererDraw"===e&&t.handleDocumentRenderStop()},nextFrame:e=>{ep.fZb?.nextFrame(e)},startProfile:(e,t)=>ep.fZb?.startProfile(e,t)??!1,stopProfile(e,t){ep.fZb?.stopProfile(e,t)},kiwiSchema:eu.w},!0);l.useEffect(()=>{r&&r.setShowHotspots(!0)},[r]);let{currFrameIndex:o,numFrames:s,shouldShowFrameCounter:c,navigateBackwardEnabled:m,navigateForwardEnabled:d}=(0,K.Xl)(r),{showNextFrame:u,showPreviousFrame:p,restartPrototype:_}=(0,K.Qd)(r,null);return l.createElement(eO,{viewer:r,viewerLoadTimeTracker:t,viewerElement:a,setViewerElement:n,currFrameIndex:o,numFrames:s,shouldShowFrameCounter:c,navigateBackwardEnabled:m,navigateForwardEnabled:d,showNextFrame:u,showPreviousFrame:p,restartPrototype:_,...e})}class eO extends l.PureComponent{constructor(e){super(e),this.hubViewerRef=l.createRef(),this.fullscreenWidth=()=>window.innerWidth-2*(0,r.hG)(eN.QtA),this.zoomForFullscreenState=e=>{let t=this.props.minimizedWidth?this.fullscreenWidth()/this.props.minimizedWidth:Math.min(window.innerWidth/screen.width,window.innerHeight/screen.height);return e?t:1/t},this.handlePageChange=e=>{this.setState({pages:e})},this.getCanvas=()=>{if(this.props.viewerElement){let e=this.props.viewerElement.getElementsByTagName("canvas");return 1===e.length?e[0]:null}return null},this._canvasRectToViewportInfo=(e,t)=>({x:0-(t?.x||0),y:0-(t?.y||0),width:e.width,height:e.height,offsetX:this.lastViewport&&-this.lastViewport.offset.x,offsetY:this.lastViewport&&-this.lastViewport.offset.y,zoomScale:this.lastViewport&&this.lastViewport.zoomScale,isPanning:!1,isZooming:!1}),this.getViewport=()=>{let e=this.getCanvas();if(!e)return this._canvasRectToViewportInfo({x:0,y:0,width:0,height:0});let t=e.getBoundingClientRect();return this._canvasRectToViewportInfo(t,{x:-6,y:-6})},this.updateViewportInfoIfNecessary=()=>{if(!this.lastViewport)return;let e=this.getViewport();eC.Y5.viewport.trigger("onSetViewport",e)},this.handleViewportChange=e=>{this.setState({zoomScale:e.zoomScale}),this.lastViewport=e,this.updateViewportInfoIfNecessary()},this.handleDocumentIsLoaded=()=>{this.props.viewerLoadTimeTracker.handleDocumentIsLoaded()},this.handleSceneDidCompleteInitialLoad=()=>{if(!this.props.viewer)return;eS.r.logValue("viewerSceneDidCompleteInitialLoad",Math.round(performance.now())),this.props.viewerLoadTimeTracker.handleViewerLoaded();let e=(0,eE.qg)(eh.Ay.location.search)["node-id"];this.props.viewer.navigateToFrameAndCloseOverlays(e);let t=this.props.viewer.getPrototypeBackgroundColor();this.setBackgroundColor(t||eF.o),this.props.viewer.on("backgroundColorChange",this.setBackgroundColor),this.props.viewer.on("prototypeBackgroundColorChange",this.setBackgroundColor);let a=this.props.viewer.getPages();this.setState({pages:a}),this.viewerLoadedTimeout=setTimeout(()=>{this.props.onLoad&&this.props.onLoad(),this.setState({isLoaded:!0})},200),this.contextViewEventTimeout=setTimeout(()=>{(0,f.sx)("Context Viewed",{name:"hub-file-canvas-loaded"})},300)},this.bindEventsToViewer=e=>{eE.qg(eh.Ay.location.search),this.setState({zoomBounds:e.getZoomBounds()}),e.on("pagesChange",this.handlePageChange),e.on("viewportChanged",this.handleViewportChange),e.on("sceneDidCompleteInitialLoad",this.handleSceneDidCompleteInitialLoad),e.on("documentIsLoaded",this.handleDocumentIsLoaded),e.on("canvasResize",this.updateViewportInfoIfNecessary),e.on("urlClicked",e_.jJ),e.on("loadVideoJsLib",async()=>{await (0,ef.Fe)().then(t=>{e&&e.injectVideoJsLib(t)})})},this.unbindEventsToViewer=()=>{let e=this.props.viewer;e&&(e.off("pagesChange",this.handlePageChange),e.off("viewportChanged",this.handleViewportChange),e.off("sceneDidCompleteInitialLoad",this.handleSceneDidCompleteInitialLoad),e.off("documentIsLoaded",this.handleDocumentIsLoaded),e.off("backgroundColorChange",this.setBackgroundColor),e.off("prototypeBackgroundColorChange",this.setBackgroundColor),e.off("canvasResize",this.updateViewportInfoIfNecessary),e.off("urlClicked",e_.jJ),e.reset())},this.setBackgroundColor=e=>{e&&this.setState({backgroundColor:e})},this.handleKeyDown=e=>{(this.state.isFocused||this.props.isFullscreen)&&((0,C.RL)(e)?this.showPreviousFrame():(0,C.Hs)(e)?this.showNextFrame():(0,C.fz)(e)&&this.restartPrototype())},this.showNextFrame=()=>{(0,f.sx)("Hub File Viewer Show Next Frame",{hubFileId:this.props.hubFile.id,currentFrameIndex:this.props.currFrameIndex,source:"click"}),this.props.showNextFrame()},this.showPreviousFrame=()=>{(0,f.sx)("Hub File Viewer Show Previous Frame",{hubFileId:this.props.hubFile.id,currentFrameIndex:this.props.currFrameIndex,source:"click"}),this.props.showPreviousFrame()},this.restartPrototype=()=>{(0,f.sx)("Hub File Viewer Restart Prototype",{hubFileId:this.props.hubFile.id,currentFrameIndex:this.props.currFrameIndex,source:"click"}),this.props.restartPrototype()},this.handleClick=e=>{e.stopPropagation(),this.setState({isFocused:!0})},this.handleExternalClick=e=>{this.hubViewerRef&&this.hubViewerRef.current&&!this.hubViewerRef.current.contains(e.target)&&this.setState({isFocused:!1})},this.getCurrentZoomScale=()=>this.props.viewer?.viewport().zoomScale||1;let t=(0,eg.tl)();this.state={backgroundColor:t.background_color||null,fileName:t.name,zoomBounds:null,zoomScale:null,scalingMode:null,isFocused:!1,isLoaded:!1,pages:[]},this.prototypeZoomButtonContainerRef=l.createRef()}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleExternalClick)}componentDidUpdate(e){if(this.props.viewer&&!e.viewer){let e=this.props.viewer;try{ev.Ay.crossOriginGetAny(this.props.hubFile.redirect_canvas_url,null,{responseType:"arraybuffer"}).then(({data:t})=>{this.bindEventsToViewer(e),eS.Q.setLoadTimeTracker(this.props.viewerLoadTimeTracker),e.loadFile({bytes:t,nodeId:"",startingPointNodeId:"",renderDots:"whiteboard"===this.props.hubFile.viewer_mode,imagePrefixURL:`/community/file/${this.props.hubFile.id}/image`,videoPrefixURL:`/api/community/files/${this.props.hubFile.id}/videos`,editorType:"DESIGN"},ek.M),this.props.viewerLoadTimeTracker.handleAfterConnectTo({entry:"InAppCommunity",connectionType:"file",fullscreen:"Fullview-IC",logViewerWaiting:!1});let a=this.props.hubFile.scaling_mode;if(!a){let t=e.getPrototypeDeviceType(),n=(0,C._Q)(t);a=(0,C.qb)(n)}let n={viewportScalingMode:a,contentScalingMode:"fixed"};e.setScalingMode(n),this.setState({scalingMode:n})})}catch(e){throw console.error("Error loading hub file:",e),e}}e.isFullscreen!==this.props.isFullscreen&&(this.props.viewer?.adjustZoom(this.zoomForFullscreenState(this.props.isFullscreen),.3),this.props.viewer?.setScrollToPan(this.props.isFullscreen))}componentWillUnmount(){clearInterval(this.contextViewEventTimeout),clearInterval(this.viewerLoadedTimeout),this.unbindEventsToViewer(),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("click",this.handleExternalClick)}render(){if(null===this.props.viewer)return null;let{backgroundColor:e,scalingMode:t}=this.state,a=eA(e),r=t?.viewportScalingMode==="scale-down";return l.createElement("div",{className:q.q9,onClick:this.handleClick,ref:this.hubViewerRef},l.createElement("div",{style:r?a:{},className:q.MI},r&&l.createElement("div",{className:q.cf}),l.createElement("div",{className:q.lJ,ref:this.props.setViewerElement}),this.props.viewer?.hasActiveScene()&&l.createElement(l.Fragment,null,l.createElement(n.BottomLeftContainer,null,l.createElement(n.ButtonContainer,null,l.createElement(ew.xy,{onClick:this.restartPrototype,className:q.qR}),l.createElement(n.Divider,null),l.createElement(ew.hJ,{navigateForwardEnabled:this.props.navigateForwardEnabled,navigateBackwardEnabled:this.props.navigateBackwardEnabled,shouldShowFrameCounter:this.props.shouldShowFrameCounter,frameCount:this.props.viewer.getNodesToShowInPrototype().length,currentFrameIndex:this.props.currFrameIndex,showPreviousFrame:this.showPreviousFrame,showNextFrame:this.showNextFrame,backIcon:ex.A,nextIcon:eL.A,containerClassName:q.YO,frameCounterTextClassName:q.d6})))),this.props.viewer?.hasActiveScene()&&l.createElement(l.Fragment,null,this.props.viewer&&l.createElement(n.HubFileZoomButtonDropdown,{hubFile:this.props.hubFile,currentZoomScale:this.getCurrentZoomScale(),adjustZoom:this.props.viewer.adjustZoom,setZoom:this.props.viewer.setZoom,resetZoomToFitCanvasContent:R.lQ}),this.props.viewer?.hasActiveScene()&&this.prototypeZoomButtonContainerRef.current&&l.createElement(n.PrototypeZoomDropdown,{viewer:this.props.viewer,targetRect:this.prototypeZoomButtonContainerRef.current.getBoundingClientRect(),initialScalingMode:this.state.scalingMode}),l.createElement(n.BottomRightContainer,null,l.createElement(n.ButtonContainer,{ref:this.prototypeZoomButtonContainerRef},this.props.viewer&&l.createElement(n.PrototypeZoomButton,{viewer:this.props.viewer,getCurrentZoomScale:this.getCurrentZoomScale})),!this.props.disableFullscreen&&l.createElement("div",{style:{visibility:"hidden"}},l.createElement(n.ButtonContainer,null,l.createElement(n.FullscreenButton,{toggleFullscreen:R.lQ,isFullscreen:!0}))))),r&&l.createElement("div",{className:q.cf})))}}eO.displayName="HubFilePrototypeViewer";var eM=a(103212);let eP=(0,r.hG)(eN.QtA);var eD=(e=>(e[e.MINIMIZED=0]="MINIMIZED",e[e.MINIMIZED_TO_FULLSCREEN=1]="MINIMIZED_TO_FULLSCREEN",e[e.FULLSCREEN=2]="FULLSCREEN",e[e.FULLSCREEN_TO_MINIMIZED=3]="FULLSCREEN_TO_MINIMIZED",e))(eD||{});let eB=e=>(e+1)%4;class eW extends l.Component{constructor(){super(...arguments),this.containerRef=l.createRef(),this.state={embedLoaded:!1,fullscreenTransitionState:(0,d.t0)(this.props.fullscreenState)?2:0,showFullscreenComments:this.props.fullscreenState===_.G4.FULLSCREEN_WITH_COMMENTS},this.handleFullscreenTransition=(e,t)=>{if(e!==t){if((0,d.t0)(e)!==(0,d.t0)(t)){let e=eB(this.state.fullscreenTransitionState),a=eB(e);this.setState({fullscreenTransitionState:e}),setTimeout(()=>{this.setState({fullscreenTransitionState:a,showFullscreenComments:!1}),t===_.G4.FULLSCREEN_WITH_COMMENTS&&setTimeout(()=>{this.setState({showFullscreenComments:!0})},400)},10)}else t===_.G4.FULLSCREEN_WITH_COMMENTS?this.setState({showFullscreenComments:!0}):e===_.G4.FULLSCREEN_WITH_COMMENTS&&this.setState({showFullscreenComments:!1})}},this.setFullscreenState=e=>{this.props.dispatch(s.sW(e))},this.onViewerLoad=()=>{this.state.embedLoaded||(this.setState({embedLoaded:!0}),parent.postMessage("LOAD_FINISHED","*"))}}componentDidUpdate(e){(e.hubFile.viewer_mode!==this.props.hubFile.viewer_mode||e.hubFile.scaling_mode!==this.props.hubFile.scaling_mode)&&this.setState({embedLoaded:!1}),e.fullscreenState!==this.props.fullscreenState&&this.handleFullscreenTransition(e.fullscreenState,this.props.fullscreenState)}isInFullscreen(){return 2===this.state.fullscreenTransitionState}isPaidFigjamWithoutPurchase(){let e=(0,p.m3)(this.props.hubFile),t=this.props.hubFile.community_resource_payment,a=(0,o.QQ)(t);return this.props.hubFile.viewer_mode===u.y4.WHITEBOARD&&e&&!a}getViewer(){return this.props.disableViewerForTest?null:this.props.hubFile.viewer_mode===u.y4.PROTOTYPE?l.createElement(eR,{hubFile:this.props.hubFile,onLoad:this.onViewerLoad,profileIdToAdminResourceAs:this.props.profileIdToAdminResourceAs,expandOnHover:!this.props.disableClickToExpand&&this.state.fullscreenTransitionState<2,isFullscreen:this.isInFullscreen(),minimizedWidth:this.containerRef.current?.offsetWidth,disableClickToExpand:this.props.disableClickToExpand,disableFullscreen:this.props.disableFullscreen}):l.createElement(em,{hubFile:this.props.hubFile,onLoad:this.onViewerLoad,isFullscreen:this.isInFullscreen(),showFullscreenComments:this.state.showFullscreenComments,disableComments:this.props.disableComments,disableClickToExpand:this.props.disableClickToExpand,disableFullscreen:this.props.disableFullscreen,profileIdToAdminResourceAs:this.props.profileIdToAdminResourceAs,fixedSize:this.props.fixedSize})}render(){let e=!!this.props.hubFile.thumbnail_is_set,t=this.state.fullscreenTransitionState,a=this.props.hubFile.viewer_mode===u.y4.WHITEBOARD,n=this.containerRef.current?.getBoundingClientRect(),r=1===t?{position:"fixed",top:n.top,left:n.left,right:window.innerWidth-n.right,bottom:window.innerHeight-n.bottom}:3===t?{position:"absolute",top:-n.top+eP,left:-n.left+eP,right:-(window.innerWidth-eP-n.right),bottom:-(window.innerHeight-eP-n.bottom),zIndex:eM.Zo}:{},o=this.state.embedLoaded?2===t?i.Ay.safari?"hub_file_detail_view--iframeContainerFullscreenSafari--x9JRk hub_file_detail_view--iframeContainerFullscreen--Itum1 hub_file_detail_view--iframeContainer---uQYN":"hub_file_detail_view--iframeContainerFullscreen--Itum1 hub_file_detail_view--iframeContainer---uQYN":"hub_file_detail_view--iframeContainer---uQYN":"hub_file_detail_view--iframeContainerLoading--Uch-h hub_file_detail_view--iframeContainer---uQYN",s={height:"100%",visibility:this.state.embedLoaded?"visible":"hidden",display:"flex",flexDirection:"column"};return l.createElement("div",{className:this.props.allowFullHeight?"hub_file_detail_view--coverImageContainerFullHeight--99Bv7 hub_file_detail_view--coverImageContainer--3DphS detail_view--coverImageContainer--Yt17P":"hub_file_detail_view--coverImageContainer--3DphS detail_view--coverImageContainer--Yt17P",ref:this.containerRef},l.createElement("div",{className:this.isInFullscreen()?"hub_file_detail_view--modalEmbedBackground--LTsNY":"hub_file_detail_view--modalEmbedBackgroundHidden--Iqlhu hub_file_detail_view--modalEmbedBackground--LTsNY",onClick:()=>this.setFullscreenState(_.G4.DEFAULT)}),l.createElement("div",{className:0===t?"hub_file_detail_view--coverImageContainerMinimized--W9o-Q hub_file_detail_view--coverImageContainerStatic--KXE3R hub_file_detail_view--_embedFullscreenTransition--sMsEd":2===t?"hub_file_detail_view--coverImageContainerFullscreen--eSIBa hub_file_detail_view--coverImageContainerStatic--KXE3R hub_file_detail_view--_embedFullscreenTransition--sMsEd":"",style:r},l.createElement("div",{className:this.props.containerClassName||o},l.createElement(c.fu,{name:"Canvas Embed"},l.createElement("div",{id:"HubFileViewerContainer",style:s},this.getViewer())),l.createElement("div",{className:this.state.embedLoaded?"hub_file_detail_view--coverImageContainerHidden--hCY-H hub_file_detail_view--coverImageContainerShowing--ZnsLn":"hub_file_detail_view--coverImageContainerShowing--ZnsLn",style:{backgroundColor:(0,m.Cn)(this.props.hubFile.client_meta)}},l.createElement(h.Ho,{image:this.props.hubFile.thumbnail_url,isSet:e,isWhiteboard:a,backgroundColor:(0,m.Cn)(this.props.hubFile.client_meta),hubFileId:this.props.hubFile.id,alt:this.props.hubFile.versions[this.props.hubFile.current_hub_file_version_id].name,resizedThumbnailUrls:this.props.hubFile.resized_thumbnail_urls})),l.createElement(g.Dy,{key:`${this.props.hubFile.viewer_mode}_${this.props.hubFile.scaling_mode}_progressBar`,className:"hub_file_detail_view--iframeProgressBar--NZmiy",style:this.state.embedLoaded?{visibility:"hidden"}:{}}))))}}},393547:(e,t,a)=>{a.d(t,{R:()=>q});var n=a(411855),l=a(188507),r=a(196302),i=a(490003),o=a(630501),s=a(463695),c=a(690283),m=a(466391),d=a(323649),u=a(688572),p=a(301929),_=a(667130),h=a(364359),g=a(889855),E=a(409716),f=a(52856),b=a(587925),v=a(918972),w=a(492841),y=a(561126),I=a(514479),T=a(212703),C=a(749467),S=a(748581),k=a(686644),F=a(193772),N=a(644526),x=a(346093),L=a(204430),A=a(511230),R=a(841330),O=a(750380),M=a(441528),P=a(578083),D=a(737921),B=a(959914),W=a(632590),U=a(154921);let G=(0,P.rw)();function z(e){let[t,a]=n.useState();return n.useEffect(()=>{(0,o.oU)(location.href).then(e=>a(e))},[]),n.createElement("div",{className:U.bx},n.createElement("div",{className:U.Uz},e.tab===D.gr.PLUGINS?(0,p.t)("community.universal_posting_modal.desktop_callout.plugins"):(0,p.t)("community.universal_posting_modal.desktop_callout.widgets")),n.createElement(m.N_,{onClick:()=>{(0,r.sx)(t?"community_publish_open_desktop_clicked":"community_publish_get_desktop_clicked",{resourceType:e.tab===D.gr.PLUGINS?L.bD.PLUGIN:L.bD.WIDGET}),t&&(0,o.Sr)(location.href,o.B3.UNIVERSAL_POSTING_MODAL)},href:t?void 0:"https://www.figma.com/downloads/",className:U.nf,target:"_blank",trusted:!0},void 0===t?"":t?` ${(0,p.t)("community.universal_posting_modal.desktop_open")}`:` ${(0,p.t)("community.universal_posting_modal.desktop_get")}`))}function H(e){return e.selectedTab===D.gr.FILES?n.createElement(D.fV,{activeFileKey:e.activeFileKey,setActiveFile:e.setActiveFile,deselectActiveFile:e.deselectActiveFile,filterFn:e.filterFn}):e.selectedTab===D.gr.PLUGINS?n.createElement(j,{activeResource:e.activeResource,setActiveResource:e.setActiveResource,deselectActiveResource:e.deselectActiveResource}):n.createElement(V,{activeResource:e.activeResource,setActiveResource:e.setActiveResource,deselectActiveResource:e.deselectActiveResource})}function V(e){let{invitedWidgets:t,pendingReviewWidgets:a,approvedWidgets:l,developmentWidgets:r}=(0,T.E$)(),i=t=>!!e.activeResource&&("localFileId"in e.activeResource&&"localFileId"in t?e.activeResource.localFileId===t.localFileId:"id"in e.activeResource&&"id"in t?e.activeResource.id===t.id:void 0);return s.eD?t.length+a.length+l.length+r.length===0?n.createElement(D.n6,{tab:D.gr.WIDGETS}):n.createElement("div",{className:U.BA,onClick:e.deselectActiveResource},t.map(e=>n.createElement(B.sp.Tile,{key:e.id,plugin:e,containerClassName:i(e)?U.Ij:U.$z})),r.map(t=>n.createElement(B.ke.Tile,{plugin:t,onClick:a=>{a.stopPropagation(),e.setActiveResource(t)},key:t.localFileId,containerClassName:i(t)?U.Ij:U.$z,showEditorTypeIcon:!0})),[...a,...l].map(t=>n.createElement(B.tY.Tile,{key:t.id,plugin:t,onClick:a=>{a.stopPropagation(),e.setActiveResource(t)},containerClassName:i(t)?U.Ij:U.$z}))):n.createElement(z,{tab:D.gr.WIDGETS})}function j(e){let{invitedPlugins:t,pendingReviewPlugins:a,approvedPlugins:l,developmentPlugins:r}=(0,T.LR)(),i=t=>!!e.activeResource&&("localFileId"in e.activeResource&&"localFileId"in t?e.activeResource.localFileId===t.localFileId:"id"in e.activeResource&&"id"in t?e.activeResource.id===t.id:void 0);return s.eD?r.length+a.length+l.length+t.length===0?n.createElement(D.n6,{tab:D.gr.PLUGINS}):n.createElement("div",{className:U.BA,onClick:e.deselectActiveResource},t.map(e=>n.createElement(B.sp.Tile,{key:e.id,plugin:e,containerClassName:i(e)?U.Ij:U.$z})),r.map(t=>n.createElement(B.ke.Tile,{plugin:t,onClick:a=>{a.stopPropagation(),e.setActiveResource(t)},key:t.localFileId,containerClassName:i(t)?U.Ij:U.$z,showEditorTypeIcon:!0})),[...a,...l].map(t=>n.createElement(B.tY.Tile,{key:t.id,plugin:t,onClick:a=>{a.stopPropagation(),e.setActiveResource(t)},containerClassName:i(t)?U.Ij:U.$z}))):n.createElement(z,{tab:D.gr.PLUGINS})}function Z(e){return s.eD?n.createElement("div",{className:U.q5},(0,p.t)("community.universal_posting_modal.plugin_info.available",{numPlugins:e.numPlugins})):n.createElement("div",{className:U.q5},(0,p.t)("community.universal_posting_modal.plugin_info.unavailable"))}function $(e){return s.eD?n.createElement("div",{className:U.q5},(0,p.t)("community.universal_posting_modal.widget_info.available",{numWidgets:e.numWidgets})):n.createElement("div",{className:U.q5},(0,p.t)("community.universal_posting_modal.widget_info.unavailable"))}function Y(e){let t;let a=(0,l.d4)(e=>e.user.email),r=(0,l.d4)(e=>e.orgById);if((0,l.d4)(e=>(0,x.Yj)(e))){let l=e.currentOrgId&&r[e.currentOrgId]?r[e.currentOrgId].name:null;t=n.createElement("div",{className:U.Js},l&&n.createElement(n.Fragment,null,l,n.createElement("span",null,"\xa0\xb7\xa0")),a)}else t=n.createElement("div",{className:U.Js},a);return n.createElement("div",{className:U.Yk},e.selectedTab===D.gr.FILES&&(0===e.numFiles?n.createElement("div",{className:U.q5},(0,p.t)("community.universal_posting_modal.file_info.available",{numFiles:e.numFiles})):n.createElement(D.IW,{query:e.searchQuery,setQuery:e.setSearchQuery,setSearchResults:e.setSearchResults})),e.selectedTab===D.gr.PLUGINS&&n.createElement(Z,{numPlugins:e.numPlugins}),e.selectedTab===D.gr.WIDGETS&&n.createElement($,{numWidgets:e.numWidgets}),t)}function Q(e){let t=(0,l.wA)(),a=(0,k.Pc)(),i=[],o={[D.gr.FILES]:(0,p.t)("community.view_bar.files"),[D.gr.PLUGINS]:(0,p.t)("community.view_bar.plugins"),[D.gr.WIDGETS]:(0,p.t)("community.view_bar.widgets")};return Object.keys(o).forEach(l=>{let s=o[l];i.push(n.createElement(G,{tab:l,mobileNavTabTitle:s,selectedTab:e.selectedTab,key:l,onClick:()=>{e.activeSearchQuery&&(t(y._z({})),t(y.ky())),(0,r.sx)("publish_type_changed",{userId:a.id,resourceType:s}),e.setSelectedTab(l)}},s))}),n.createElement("div",{className:U.Lm},n.createElement("div",{className:U.KE},i),n.createElement(c.s_,{className:U.g8,dispatch:()=>{(0,r.sx)("community_publish_modal",{step:I.WX.CLOSED}),t(w.Ce())}}))}var K=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(K||{});let q=(0,O.Ju)(function(e){let t=(0,k.Pc)(),a=(0,l.wA)(),o=(0,l.d4)(e=>!!e.user),s=(0,l.d4)(e=>e.currentUserOrgId),c=(0,i.ql)(s),x="loaded"===c.status,[O,P]=n.useState(2),[B,G]=n.useState({}),z=(0,T.Im)(),V=(0,S.ud)(),j=(0,T.CI)(),Z=(0,T.Dy)(),$=Object.keys(V).length;(0,N.IT)((0,g.se)()),(0,N.IT)((0,g.fd)()),n.useEffect(()=>{a(y._z({})),o&&(a(h._J()),a(E.aq()));let e=document.body.style.overflowY;return document.body.style.overflowY="hidden",()=>{document.body.style.overflowY=e}},[]),n.useEffect(()=>{if(!x||2!==O)return;let e=c.data.map(e=>e.key);0!==e.length&&(P(1),R.S.getHubFileDuplicates({fileKeys:e}).then(e=>{G(e.data.meta),P(0)}))},[O,x,c.data]);let K=n.useCallback(e=>{let t=B[e.key],a=e.editorType===F._Y.SLIDES;return!t&&!a},[B]),q=()=>{eo&&a(y.ky()),(0,r.sx)("community_publish_modal",{user:t.id,step:I.WX.CLOSED}),a(w.Ce())},J=async e=>{await a(_.rH({fileKey:e}))},X=async e=>{e&&(et(e),V[e.key]||a(v.yJ({file:e})),await J(e.key))},[ee,et]=n.useState(null),ea=()=>et(null),[en,el]=n.useState(null),[er,ei]=n.useState(D.gr.FILES),[eo,es]=n.useState(""),[ec,em]=n.useState([]),ed=n.useCallback(e=>{em(e&&e.filter(e=>K(e.model)))},[K]);if(!o)return n.createElement(n.Fragment,null);let eu=x&&0===O;return n.createElement(M.Nb,{size:"any",className:U.aq,hide:q},n.createElement(Q,{activeSearchQuery:eo,selectedTab:er,setSelectedTab:ei}),n.createElement(Y,{selectedTab:er,currentOrgId:s,searchQuery:eo,setSearchQuery:es,setSearchResults:ed,numPlugins:j,numWidgets:Z,numFiles:$}),n.createElement(u.P,{className:U.jG,hideScrollbar:!0},!eu&&n.createElement("div",{className:U.g4},n.createElement(d.kt,{size:"small"})),eo&&n.createElement(D.fp,{activeSearchQuery:eo,activeFileKey:ee?.key||null,setActiveFile:X,deselectActiveFile:ea,searchResults:ec}),eu&&!eo&&n.createElement(H,{selectedTab:er,activeFileKey:ee?.key||null,setActiveFile:X,deselectActiveFile:ea,activeResource:en,setActiveResource:el,deselectActiveResource:()=>el(null),filterFn:K})),n.createElement("div",{className:U.qr},n.createElement("div",{className:U.PJ},(0,p.t)("community.universal_posting_modal.footer.choose_resource"),n.createElement(m.CY,{href:"https://help.figma.com/hc/articles/360040035974-Publish-Community-files",target:"_blank",trusted:!0},(0,p.t)("community.universal_posting_modal.footer.learn_more"))),n.createElement("div",{className:U.GC},n.createElement(W.M4,{onClick:q},(0,p.t)("general.cancel")),n.createElement(W.UC,{disabled:er===D.gr.FILES?!ee:er===D.gr.PLUGINS||er===D.gr.WIDGETS?!en:void 0,onClick:()=>{if(er===D.gr.FILES)ee&&((0,r.sx)("community_publish_modal",{user:t.id,step:I.WX.DETAILS,resourceType:L.bD.HUB_FILE,fileKey:ee.key,fileName:ee.name}),a((0,f.t)({fileKey:ee.key,isFullscreenOpen:!1,entryPoint:A.k2.UNIVERSAL_POSTING,canvasThumbnailPromise:(0,C.$)(ee.key,t),source:e.source})),et(null));else if((er===D.gr.PLUGINS||er===D.gr.WIDGETS)&&en){let e="localFileId"in en?en:z[en.id],n=e.localFileId;(0,r.sx)("community_publish_modal",{user:t.id,step:I.WX.DETAILS,resourceType:er===D.gr.PLUGINS?L.bD.PLUGIN:L.bD.WIDGET,pluginId:e.plugin_id,pluginName:e.name,localFileId:n}),a((0,b.r)({localFileId:n,entryPoint:A.k2.UNIVERSAL_POSTING})),el(null)}}},(0,p.t)("general.next")))))},"Universal Posting Modal")},752722:(e,t,a)=>{a.d(t,{ZH:()=>I,$z:()=>y,IX:()=>w});var n=a(411855),l=a(188507),r=a(629019),i=a.n(r),o=a(474474),s=a(709529),c=a(579557),m=a(231819),d=a(301929),u=a(797500),p=a(976549),_=a(748581),h=a(556576),g=a(225105);let E="custom_template_publish_nudge_content--thumbnailInnerContainerMd--Emvtj",f="custom_template_publish_nudge_content--currFileThumbnail--Yo6Lb",b=(0,o.ck)("b13789723ab5e9138ab263193f7d82aff4c47674"),v=(0,o.ck)("f290b00b2b225be3eb5056cb4473d87953764837");var w=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(w||{});function y({size:e=1,useCurrentFileAsThumbnail:t=!1}){let a=(0,g.dq)(),r=(0,l.d4)(e=>e.user),o=(0,h.tS)(),c=(0,_.ud)(),m={2:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicSm--WcSGr custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarSm--koOYf custom_template_publish_nudge_content--orgAvatar--qPeJa custom_template_publish_nudge_content--avatarSm--Zxket custom_template_publish_nudge_content--avatar--abDDN",userAvatar:"custom_template_publish_nudge_content--userAvatarSm--B4Zex",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailSm--iH1ZK custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerSm--gUImw custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarSm--Zxket custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:E},1:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicMd--7iA69 custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarMd--oCgCy custom_template_publish_nudge_content--orgAvatar--qPeJa",userAvatar:"custom_template_publish_nudge_content--userAvatarMd--G2FtM",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailMd--dl3H9 custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerMd--8TV1k custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarMd--D18sG custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:E},0:{modalGraphic:"custom_template_publish_nudge_content--modalGraphicLg--0mkdU custom_template_publish_nudge_content--modalGraphic--rfPmE",orgAvatar:"custom_template_publish_nudge_content--orgAvatarLg--PpLOy custom_template_publish_nudge_content--orgAvatar--qPeJa",userAvatar:"custom_template_publish_nudge_content--userAvatarLg--dDo-X",exampleFileThumbnail:"custom_template_publish_nudge_content--exampleFileThumbnailLg--9cUca custom_template_publish_nudge_content--exampleFileThumbnail--jShwc",thumbnailContainer:"custom_template_publish_nudge_content--thumbnailContainerLg--Mrew2 custom_template_publish_nudge_content--thumbnailContainer--m9CYk",avatar:"custom_template_publish_nudge_content--avatarLg--Xep7T custom_template_publish_nudge_content--avatar--abDDN",thumbnailInnerContainer:"custom_template_publish_nudge_content--thumbnailInnerContainer--2yUkJ"}}[e],d=n.createElement("img",{src:b,alt:"",className:f});if(null!=o&&t){let e=c[o]?.thumbnail_url;e&&(d=n.createElement("img",{src:e,alt:"",className:f}))}return n.createElement("div",{className:m.modalGraphic},n.createElement("img",{src:v,alt:"",className:m.exampleFileThumbnail}),r&&n.createElement(s.n,{className:i()(m.avatar,m.orgAvatar),userId:r.id,orgId:a,size:2===e?16:1===e?24:32}),r&&n.createElement("div",{className:i()(m.avatar,m.userAvatar)},n.createElement(u.H8,{user:r,size:2===e?u.Pf.SMALL16:1===e?u.Pf.MEDIUM:u.Pf.LARGE})),n.createElement("div",{className:m.thumbnailContainer},n.createElement("div",{className:m.thumbnailInnerContainer},d)))}function I(){return n.createElement("div",null,n.createElement(y,{size:0,useCurrentFileAsThumbnail:!0}),n.createElement("div",{className:c.cx.p16.font11.$},(0,d.tx)("whiteboard.inserts.custom_templates_description")),n.createElement("div",{className:c.cx.flex.justifyEnd.mx16.mb16.$},n.createElement(m.pW,{newTab:!0,href:p.A},(0,d.tx)("whiteboard.inserts.learn_more"))))}},255532:(e,t,a)=>{a.d(t,{P:()=>M,v:()=>L});var n=a(411855),l=a(188507),r=a(922827),i=a(539321);if(443==a.j)var o=a(395096);var s=a(196302),c=a(596523),m=a(134745),d=a(454475),u=a(323649),p=a(919122),_=a(688572),h=a(442009),g=a(171946),E=a(301929),f=a(819635),b=a(313845),v=a(345202),w=a(139558),y=a(556576),I=a(188098),T=a(984401),C=a(248172),S=a(852024),k=a(816054);if(443==a.j)var F=a(949207);if(443==a.j)var N=a(156238);if(443==a.j)var x=a(432023);var L=(e=>(e.LOADED="post-to-feed-view-loaded",e.SELECT_NODE="post-to-feed-select-node",e))(L||{});function A(e){return n.createElement("div",{className:null!==e.isSelectedIdx?k.El:k.Vs,onClick:e.onClick,role:"button",tabIndex:0,ref:t=>{t&&e.observe(t)},"data-observer-guid":e.node.guid},n.createElement("div",{className:k.h3,style:{backgroundColor:e.backgroundColor}},n.createElement(p.x,{isLoading:!e.thumbnailUrl},()=>n.createElement("img",{className:k.xn,src:e.thumbnailUrl,alt:"",draggable:!1}))),n.createElement("div",{className:k.JO},n.createElement("div",{className:k.qp},e.node.name)),null!==e.isSelectedIdx&&1!==e.totalNumSelected&&n.createElement("div",{className:k.Jx},e.isSelectedIdx+1))}function R(e){let{toggleSelectNode:t}=e,a=(e.pageNode&&(0,i.colorToHex)(e.pageNode.backgroundColor))??"",[l,r]=n.useState(!1),o=n.useCallback(n=>{t(n,{pageId:e.pageNode.guid,pageBackgroundColor:a})},[t,e.pageNode.guid,a]);return n.createElement("div",{className:k.RW},e.showCollapsibleHeader&&n.createElement("div",{className:k.Vr,onClick:()=>r(e=>!e),role:"button",tabIndex:0},l?n.createElement(g.B,{svg:x.A,className:k.Rq}):n.createElement(g.B,{svg:F.A,className:k.Rq}),e.pageNode.name,"\xa0",n.createElement("span",{className:k.Du},"\xb7 ",e.nodes.length)),!l&&n.createElement("div",{className:k.Mc},e.nodes.map(t=>{let l=e.selectedNodeGuids?.indexOf(t.guid)??null;return n.createElement(A,{key:`node-${t.guid}`,node:t,thumbnailUrl:e.thumbnailByGuid[t.guid]?.url??"",backgroundColor:a,isSelectedIdx:-1===l?null:l,onClick:()=>o(t.guid),totalNumSelected:e.selectedNodeGuids?.length??null,observe:e.observe})})))}let O="feed-post-page-selector-menu";function M(){let e=n.useCallback((e,t)=>{let a=window.parent;window.self.origin===a.origin&&a&&a.postMessage({type:e,data:t})},[]),t=n.useRef(new m.jk("feed_post_to_file_load",{}));n.useEffect(()=>{t.current.start()},[]);let a=(0,w.aV)(),i=(0,w.eY)(),p=(0,y.tS)();n.useEffect(()=>{if(!a){t.current.stop();let a=t.current.getElapsedTime();(0,s.sx)("team_feed.post_from_file.file_load",{elapsedMs:a,fileKey:p}),e("post-to-feed-view-loaded",!0)}},[a,e,p]);let F=(0,l.d4)(e=>e.mirror.appModel.pagesList),x=n.useMemo(()=>F.reduce((e,t)=>({...e,[t.nodeId]:i.get(t.nodeId)}),{}),[F,i]),L=(0,l.wA)(),A=n.useMemo(()=>Object.values(x).flatMap(e=>e?e.uiOrderedChildren.map(t=>{let a=i.get(t);return a&&("FRAME"===a.type||"SECTION"===a.type)?{...a,pageId:e.guid,name:a?.name}:null}).filter(e=>e):[]).filter(e=>null!==e),[x,i]),M=n.useMemo(()=>{let e={};for(let t of A)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[A]),P=n.useMemo(()=>new I.Ef(A,{keys:["name"]}),[A]),[D,B]=n.useState(""),[W,U]=n.useState(null),[G]=(0,o.A)(D,200),z=n.useCallback(e=>{U(P.search(e))},[P]),H=n.useMemo(()=>{if(null===W)return null;let e={};for(let t of W)e[t.pageId]?e[t.pageId].push(t):e[t.pageId]=[t];return e},[W]);n.useEffect(()=>{""!==G&&z(G)},[G,z]);let V=(0,v.Um)(),j=n.useRef(null),[Z,$]=n.useState(null);n.useEffect(()=>{if(Z||!i||!M||0===Object.keys(M).length)return;let e=i.get(Object.keys(M)[0]);e&&$(e)},[Z,M,i]);let[Y,Q]=n.useState({}),[K,q]=n.useState([]),J=(0,c.ZC)(K),X=n.useRef(null),[ee,et]=n.useState([]),ea=n.useCallback(e=>{let t=[];e.forEach(e=>{if(e.isIntersecting&&e.target instanceof HTMLElement){let a=e.target.dataset?.observerGuid;a&&t.push(a)}}),et(t)},[]),en=n.useMemo(()=>new IntersectionObserver(ea,{threshold:[.25]}),[ea]),el=n.useCallback(e=>{en&&en.observe(e)},[en]),[er,ei]=n.useState({});n.useEffect(()=>{if(0===ee.length)return;let e=ee.filter(e=>!er[e]);0!==e.length&&(0,b.Jr)().loadAllImagesUnder(e,r.MoD.NON_ANIMATED_ONLY,"feed.postFromFile").then(()=>{e.forEach(e=>{setTimeout(()=>{ei(t=>{if(t[e])return t;let a=(0,S.BO)(e);return{...t,[e]:{url:URL.createObjectURL(new Blob([a])),data:a}}})},0)})})},[ee,er]),n.useEffect(()=>{K!==J&&e("post-to-feed-select-node",K.map(e=>({guid:e,thumbnail:er[e].data,backgroundColor:Y[e]})))},[J,K,e,er,Y]);let eo=n.useCallback((e,t)=>{er[e]&&(Q(a=>t.pageBackgroundColor?{...a,[e]:t.pageBackgroundColor}:a),q(t=>t.includes(e)?t.filter(t=>e!==t):t.length>=T.e3?t:[...t,e]))},[er]);return M&&0===Object.keys(M).length?n.createElement("div",{className:k.se},(0,E.t)("fig_feed.no_top_level_nodes")):Z?n.createElement("div",{className:k.kL},n.createElement("div",{className:k.Y},n.createElement(h.IW,{query:D,className:k.ON,onChange:B,clearSearch:()=>{B(""),U(null)},focusOnMount:!1,iconClassName:k.qc,placeholder:(0,E.t)("fig_feed.search_frames")}),""===D&&n.createElement(n.Fragment,null,n.createElement("div",{role:"button",ref:j,onClick:()=>{V?.type===O?L(f.oB()):L(f.j7({type:O}))},tabIndex:0,className:k.YZ},n.createElement("div",null,Z.name),n.createElement(g.B,{svg:N.A,width:"8px",autosize:!0})),j.current&&V?.type===O&&n.createElement(C.Cf,{showPoint:!1,targetRect:j.current.getBoundingClientRect(),propagateCloseClick:!0},Object.keys(M).map(e=>n.createElement(d.MM,{key:e,onClick:()=>$(x[e]),checked:Z.guid===e},x[e].name))))),n.createElement(_.P,{hideScrollbar:!0,className:k.jG,innerClassName:k.hu,scrollContainerRef:X},""===D&&n.createElement(R,{pageNode:Z,nodes:M[Z.guid]||[],thumbnailByGuid:er,selectedNodeGuids:K,toggleSelectNode:eo,observe:el}),""!==D&&(null===H?n.createElement("div",{className:k.Do},n.createElement(u.kt,{size:"large"})):Object.entries(H).length>0?Object.entries(H).map(([e,t])=>n.createElement(R,{key:e,pageNode:x[e],nodes:t,thumbnailByGuid:er,selectedNodeGuids:K,toggleSelectNode:eo,showCollapsibleHeader:!0,observe:el})):n.createElement("div",{className:k.Lp},n.createElement("div",null,(0,E.tx)("fig_feed.no_frames_matching",{searchQuery:n.createElement(n.Fragment,null,n.createElement("span",{className:k.ZF},D))})))))):null}},11792:(e,t,a)=>{a.d(t,{i:()=>d});var n=a(411855),l=a(434236),r=a(629019),i=a.n(r),o=a(719900),s=a(466391),c=a(301929),m=a(311807);function d({children:e,isInsertingTemplate:t,shouldUseOpaqueBackground:a=!1,insertTemplate:r}){let d=(0,m.Td)(),u=d?(0,c.t)("browse_templates_modal.add_template.disabled"):"";return n.createElement(s.$$,{className:i()("insert_template_cta--button--InTLP",a&&"insert_template_cta--buttonOpaque--oEwuq"),onClick:o.Ay.isIpad?void 0:r,onPointerDown:o.Ay.isIpad?r:void 0,disabled:t||d,"data-not-draggable":!0,title:u},n.createElement("span",{style:{visibility:t?"hidden":"visible"}},e),t&&n.createElement("span",{className:"insert_template_cta--spinner--xtwmE"},n.createElement(l.k,{size:"md"})))}},331439:(e,t,a)=>{a.d(t,{PH:()=>eg});var n,l=a(411855),r=a(188507),i=a(140593),o=a(3360),s=a(256659),c=a(775448),m=a(195909),d=a(115630),u=a(629019),p=a.n(u),_=a(301929),h=a(912675),g=a(727221),E=a(757426),f=a(25448),b=a(754468),v=a(556576),w=a(438476),y=a(43166),I=a(204430),T=a(279159),C=a(750380),S=a(463033),k=a(373731),F=a(41655),N=a(352074),x=a(591032),L=a(474774),A=a(579557),R=a(764554),O=a(15544),M=a(594816);let P="_team_templates_browse",D="seen_figjam_make_tmpl_category";function B({selectedCategory:e,selectCategory:t,categoryTitles:a,categoryIds:n,triggeredFrom:i,makeSomethingCategoryId:o,subcategories:s}){let c=(0,r.wA)(),m=(0,v.tS)(),d=(0,E.Gi)(),u=(0,O.f)("figjam_editor_onboarded"),p=(0,O.f)(D),h=n.filter(e=>s.every(t=>!t.categoryIds.includes(e)));(0,l.useEffect)(()=>{"makeSomething"!==i&&u&&!p&&(t(o),c(R.b({[D]:!0})))},[c,u,p,o,t,i]);let g=e=>{t(e),(0,b.Cu)({fileKey:m,categoryName:e},"template_modal_category_selected")},f=t=>t.map(t=>{let n=a[t];return n?l.createElement(W,{key:t,text:n,isSelected:e===t,onClick:()=>g(t)}):null});return l.createElement("div",{className:M.pz},l.createElement(W,{text:(0,_.t)("browse_templates_modal.all_templates"),onClick:()=>t(void 0),isSelected:!e}),d&&l.createElement(l.Fragment,null,l.createElement(W,{text:(0,_.t)("browse_templates_modal.header_name_templates",{entityName:d.name||""}),onClick:()=>g(P),isSelected:e===P,"data-testid":"org-templates"})),f(h),s.map(e=>l.createElement("div",{key:e.id},l.createElement("div",{className:A.cx.minH16.p0.$}),l.createElement("div",{className:M.vC},e.title),f(e.categoryIds))),l.createElement("div",{className:A.cx.minH8.$}),l.createElement("span",{className:M.D5},l.createElement(L.U,{className:M.wP}),l.createElement(N.N,{href:"/community/figjam",newTab:!0,onClick:()=>{(0,b.Cu)({fileKey:m,uiSelectedView:"browse_more_sidebar_link",name:"Templates Modal Browse More"},"cta_clicked")}},(0,_.tx)("browse_templates_modal_sidebar.see_more_in_community"))))}function W(e){return l.createElement(x.E,{className:e.isSelected?M.X6:M.Mo,onClick:e.onClick},e.text)}B.displayName="BrowseTemplatesModalSidebar",W.displayName="TemplatesPickerSidebarItem";var U=a(334826),G=a(863302);function z(e){let t=(0,E.tS)(),a=(0,r.d4)(e=>e.hubFiles),n=(0,v.tS)(),i=l.useMemo(()=>Z(e.templates),[e.templates]),o=l.useRef(null);l.useEffect(()=>{o.current?.scrollTo(0,0)},[e.selectedCategory]);let s=null;if(e.selectedCategory){let t=(e.templates[e.selectedCategory]||[]).map(e=>a[e]);s=l.createElement(V,{templates:t.filter(e=>!!e).map(e=>({template:e,type:y.n.HubFile})),categoryTitle:e.categoryTitles[e.selectedCategory],category:e.selectedCategory,templateInsertionLocation:e.templateInsertionLocation,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,previewHubFile:e.previewHubFile})}else s=l.createElement(l.Fragment,null,l.createElement(G.O9,{key:"team_template_announcement"}),t&&l.createElement(H,{onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,templateInsertionLocation:e.templateInsertionLocation,selectCategory:e.selectCategory}),e.categoryIds.map(t=>{let n=(i[t]||[]).map(e=>a[e]).filter(e=>!!e);return l.createElement(V,{key:`templates_category_preview:${t}`,category:t,categoryTitle:e.categoryTitles[t],templates:n.map(e=>({template:e,type:y.n.HubFile,category:t})),templateInsertionLocation:e.templateInsertionLocation,selectCategory:e.selectCategory,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate,previewHubFile:e.previewHubFile})}));return l.createElement("div",{className:M.rb,ref:o},s,l.createElement(U.tJ,{url:e.enterCommunityUrl,fileKey:n||null}))}function H(e){let{teamTemplates:t,isLoading:a}=(0,E.wv)(3),n=(0,E.Gi)();return n?a?l.createElement(l.Fragment,null,l.createElement(U.G3,null),l.createElement(U.G3,null),l.createElement(U.G3,{shouldFade:!0})):t?.length?l.createElement(V,{category:P,categoryTitle:(0,_.t)("browse_templates_modal.header_name_templates",{entityName:n.name}),templates:t,selectCategory:e.selectCategory,templateInsertionLocation:e.templateInsertionLocation,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate}):null:null}function V(e){let t=e.selectCategory;return l.createElement("div",{className:M.xQ},l.createElement("div",{className:M.w0},l.createElement("div",{className:M.$I},e.categoryTitle),t&&l.createElement(S.$n,{variant:"link",onClick:()=>t(e.category)},(0,_.tx)("browse_templates_modal.see_all"))),l.createElement(j,{templates:e.templates,templateInsertionLocation:e.templateInsertionLocation,previewHubFile:e.previewHubFile,onInsertTemplate:e.onInsertTemplate,isInsertingTemplate:e.isInsertingTemplate}))}function j(e){let t=(0,k.fG)(),{previewHubFile:a}=e;return l.createElement(U.iq,null,e.templates.map(n=>{let{primaryKey:r}=t(n);return l.createElement(U.AF,{key:r,template:n,templateInsertionLocation:e.templateInsertionLocation,onInsert:()=>e.onInsertTemplate(n),isInsertingTemplate:e.isInsertingTemplate(r),onPreview:n.type===y.n.HubFile&&a?()=>a(n.template.id):void 0})}),l.createElement(F.hT,{numResources:e.templates.length,maxResources:3}))}z.displayName="BrowseTemplatesModalContent",V.displayName="TemplatesPickerCategorySection";let Z=(e,t=3)=>{let a={};return Object.keys(e).forEach(n=>{e[n]&&(a[n]=e[n].slice(0,t))}),a};var $=a(671513),Y=a(997540),Q=a(35356),K=a(595316),q=a(773493),J=a(686644),X=a(132540);(e=>{function t(e){return l.createElement("div",{className:"resource_detail_view_header--subtitleContainer--G4iVj"},e.children)}e.SmallStickyTopBar=function(e){let a=(0,J.iZ)()?{}:{top:X.avG};return l.createElement("div",{className:e.className||"resource_detail_view_header--headerContainer_Small--GNjXr resource_detail_view_header--headerContainerBase--noQIf",style:a},l.createElement("div",{className:"resource_detail_view_header--headerElementsContainer_Small--7d4Dl resource_detail_view_header--headerElementsContainerBase--Bkwye detail_view--container--5uafb detail_view--_container--9sCA7 text--fontPos14--OL9Hp text--_fontBase--QdLsd"},l.createElement("div",{className:"resource_detail_view_header--headerLeft--3evKW"},l.createElement("div",{className:"resource_detail_view_header--titleContainer--D1-zT"},l.createElement("h1",{className:"resource_detail_view_header--nameShrunk--djxg3 text--fontPos18--rYXJb text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e.name),e.titleBadge),l.createElement(t,null,l.createElement("div",{className:"resource_detail_view_header--subtitleItem--Wtt2d text--fontPos13--xW8hS text--_fontBase--QdLsd"},l.createElement(q.L,{publishers:e.resource.community_publishers.accepted}),l.createElement(q.I,{publishers:e.resource.community_publishers.accepted})))),l.createElement("div",{className:"resource_detail_view_header--headerRight--HScUW detail_view--headerRight--nsyNm"},l.createElement("div",{className:"resource_detail_view_header--secondaryCTAContainer--iNAnz detail_view--likesContainer--LC17P"},e.secondaryCTAButton),l.createElement("div",{className:"resource_detail_view_header--rowReverse--Fl6Zv detail_view--rowReverse---FVgL"},e.mainCTAButton))))}})(n||(n={}));var ee=a(11792);function et(e){let t=(0,r.wA)(),a=(0,r.d4)(e=>e.hubFiles),i=a[e.templateId],o=(0,w.a6)(i);if(!i)return null;let s=l.createElement(ee.i,{insertTemplate:()=>e.insertTemplate({type:y.n.HubFile,template:i}),isInsertingTemplate:e.isInsertingTemplate},(0,w.Ve)(e.templateInsertionLocation)),c=e.moreTemplateIds.filter(t=>t!==e.templateId).map(e=>a[e]);return l.createElement("div",{className:"browse_templates_modal_resource_preview--resourcePreview--xsc-T"},l.createElement(n.SmallStickyTopBar,{resource:i,name:o.name,mainCTAButton:s,secondaryCTAButton:l.createElement(l.Fragment,null),className:"browse_templates_modal_resource_preview--headerContainer--SGsCX",openCreatorsInNewTab:!0}),l.createElement("div",{className:"browse_templates_modal_resource_preview--container--FlTtG hub_file_detail_view--container--wjAfD"},l.createElement("div",{className:"browse_templates_modal_resource_preview--embedContainer--ONcnZ hub_file_detail_view--embedContainer--QMuUr detail_view--embedContainer---TcbF"},l.createElement(K.Z,{key:i.id,hubFile:i,profileIdToAdminResourceAs:null,fullscreenState:Q.G4.DEFAULT,dispatch:t,containerClassName:"browse_templates_modal_resource_preview--embedContainerInner--Bu6RJ hub_file_detail_view--iframeContainer---uQYN",disableClickToExpand:!0,disableComments:!0,disableFullscreen:!0,fixedSize:!0})),l.createElement("div",{className:"browse_templates_modal_resource_preview--metadataContainer--GipYm"},l.createElement("div",{className:"browse_templates_modal_resource_preview--description--EuZxv"},(0,Y.$J)(o.description).trim().length>0&&l.createElement($.R,{fallback:null,errorFallback:null,value:o.description}),l.createElement("div",{className:A.cx.mt16.$},l.createElement(N.N,{href:`/community/file/${e.templateId}`,newTab:!0},(0,_.tx)("browse_templates_modal.see_more_details_in_community")))),l.createElement("div",{className:"browse_templates_modal_resource_preview--moreTemplatesHeader--Kz1a1 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,_.tx)("browse_templates_modal.more_templates_like_this")),l.createElement("div",{className:"browse_templates_modal_resource_preview--moreTemplatesGrid--LqGIO"},c.slice(0,6).map(t=>l.createElement(U.Pr,{hubFileId:t.id,key:t.id,templateInsertionLocation:e.templateInsertionLocation,onInsert:()=>e.insertTemplate({type:y.n.HubFile,template:t}),isInsertingTemplate:e.isInsertingTemplate,previewHubFile:()=>e.selectTemplate(t.id)}))))))}et.displayName="BrowseTemplatesModalResourcePreview";var ea=a(135624),en=a(288961),el=a(193772),er=a(117688);function ei({searchQuery:e,hubFileResultIds:t,isInsertingTemplate:a,onInsertTemplate:n,onPreviewHubFileTemplate:r}){let i=(0,v.tS)(),o=l.useRef(null),s=(0,E.tS)(),[c,m]=(0,l.useState)(!s),{templates:d,requestLoadMore:u,isLoading:p}=(0,f.Ou)(e,s,el._Y.WHITEBOARD);(0,l.useEffect)(()=>{m(!s),"function"==typeof o.current?.scroll&&o.current.scroll({top:0,behavior:"smooth"})},[e,s]);let h=`/community/search?resource_type=files&editor_type=figjam&query=${e}`;return 0!==t.length||0!==d.length||p?p&&0===d.length?l.createElement(U.Cm,null):l.createElement("section",{className:A.cx.wFull.p24.overflowYScroll.$,ref:o},l.createElement(U.iq,null,s&&d.map(e=>l.createElement(U.AF,{key:`team-template-${e.file_key}`,template:{template:e,type:y.n.TeamTemplate},isInsertingTemplate:a(e.file_key),onInsert:()=>n({template:e,type:y.n.TeamTemplate})})),c&&t.map(e=>l.createElement(U.Pr,{key:`hub-file-template-${e}`,hubFileId:e,onInsert:n,isInsertingTemplate:a(e),previewHubFile:()=>r(e)}))),s&&!p&&l.createElement(ea.a,{onIntersectionChange:({isIntersecting:e})=>{e&&!u()&&m(!0)}}),!p&&l.createElement("div",{className:A.cx.mt24.$},l.createElement(U.tJ,{url:h,fileKey:i}))):l.createElement(en._3,{illustration:er.A,resourceTypeDisplayString:"templates",query:e,cta:l.createElement(N.N.Button,{href:h,newTab:!0,variant:"secondary"},(0,_.tx)("browse_templates_modal.browse_more_in_community"))})}var eo=a(727466),es=a(755020),ec=a(442009);function em(e){return l.createElement(s.Y9,null,e.previewTemplateId?l.createElement(eo.K,{"aria-label":(0,_.t)("general.back"),onClick:e.goBack},l.createElement(es.C,null)):l.createElement(ec.IW,{query:e.searchQuery,clearSearch:()=>e.setSearchQuery(""),onChange:e.setSearchQuery,className:M.ON,placeholder:(0,_.t)("browse_templates_modal.search_templates"),focusOnMount:!0}))}em.displayString="BrowseTemplatesModalTopBar";var ed=a(98140),eu=a(552019),ep=a(981138);function e_(e){let t;let{onTemplateInsertedCurrentFile:a,onTemplateInsertedNewFile:n,onClose:c}=e,m=l.useRef(null),{templates:d,categoryTitles:u,duplicateFile:h,fileKey:b,searchQuery:v,searchTemplatesResult:C,setSearchQuery:S,categoryIds:k,subcategories:F}=(0,ep.bg)({source:"browse-templates-modal"}),{templates:N,categoryIds:x}=(0,ep.bg)({templatesShelfType:I.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER}),L={...N,...d},A=(0,E.Gi)(),R={};x.reduce((e,t)=>(e[t]=(0,_.t)("browse_templates_modal_sidebar.get_started"),e),R);let O={...u,...R},[D,W]=l.useState(),[U,G]=l.useState(),H=(0,o.Im)(L),V=D&&Object.values(L).find(e=>e.includes(D))||[],{insertTemplate:j,isInsertingTemplate:Z}=(0,f.Fz)(),$=(0,r.d4)(e=>D?e.hubFiles[D]:null),Y=l.useCallback(()=>{a?a():c()},[a,c]);l.useEffect(()=>{let t=k.filter(t=>u[t]===e.initiallySelectedCategoryTitle);1===t.length&&G(t[0])},[k,u,e.initiallySelectedCategoryTitle]),l.useEffect(()=>{m.current?.scrollTo(0,0),D&&$&&(0,g._)("resource_previewed",{fileKey:b,resourceType:"template",resourceName:(0,w.a6)($).name,resourceId:D,triggeredFrom:"browse-templates-modal",templateType:y.n.HubFile})},[D,b,$]);let Q=!v,K=(0,f.b4)(),q=(0,f.WS)(),J=e=>Z(e)||q(e),X=t=>{if(e.templateInsertionLocation===w.RD.CURRENT_FILE)j({template:t,onSuccess:Y,triggeredFrom:"browse-templates-modal"});else{switch(t.type){case y.n.HubFile:h(t.template.id);break;case y.n.TeamTemplate:K({templateIdentifier:{type:T.vt.TeamTemplate,file_key:t.template.file_key},templateName:t.template.name,openInNewTab:!0});break;case y.n.TeamTemplateLg:K({templateIdentifier:{type:T.vt.TeamTemplate,file_key:t.template.fileKey},templateName:t.template.name,openInNewTab:!0});break;default:(0,i.xb)(t)}n?.()}};if(D)t=l.createElement(et,{templateId:D,templateInsertionLocation:e.templateInsertionLocation,insertTemplate:X,isInsertingTemplate:J(D),moreTemplateIds:V,selectTemplate:W}),Q=!1;else if(v)t=l.createElement(ei,{searchQuery:v,hubFileResultIds:C,isInsertingTemplate:J,onInsertTemplate:X,onPreviewHubFileTemplate:W});else if(U===P)switch(A?.type){case"org":t=l.createElement(ed.yB,{insertTemplate:X,isInsertingTemplate:J,templateInsertionLocation:e.templateInsertionLocation});break;case"team":t=l.createElement(eu.z,{teamId:A.entity.id,teamName:A.name,onInsert:X,isInsertingTemplate:J,templateInsertionLocation:e.templateInsertionLocation});break;default:t=l.createElement(l.Fragment,null)}else t=H?l.createElement(l.Fragment,null):l.createElement(z,{templates:L,categoryIds:k,categoryTitles:O,selectedCategory:U,selectCategory:G,enterCommunityUrl:"/community/figjam",templateInsertionLocation:e.templateInsertionLocation,previewHubFile:W,onInsertTemplate:X,isInsertingTemplate:J});return l.createElement(s.Wk,{className:p()({[M.hW]:"newFile"===e.triggeredFrom})},l.createElement(em,{searchQuery:v,setSearchQuery:S,previewTemplateId:D,goBack:()=>W(void 0)}),l.createElement("div",{className:M.jE,ref:m},Q&&l.createElement(B,{categoryIds:k,categoryTitles:O,selectedCategory:U,selectCategory:G,makeSomethingCategoryId:x[0]??"",triggeredFrom:e.triggeredFrom,subcategories:F}),t))}function eh(e){let{properties:t,name:a}=(0,h.j6)(),{onClose:n}=e,r=l.useCallback(()=>{n(),(0,b.Cu)({...t,trackingContext:a,text:"Templates Close Button"})},[t,a,n]),i=c.hS({...e,onClose:r});return l.createElement(d.v,{mode:"whiteboard"},l.createElement(m.bL,{width:888,manager:i},l.createElement(e_,{...e})))}let eg=(0,C.Ju)(function(e){let t=(0,v.tS)();return l.createElement(h.fu,{name:"template_modal_shown",properties:{fileKey:t,source:e.triggeredFrom}},l.createElement(eh,{...e}))},"BrowseTemplatesModal")},334826:(e,t,a)=>{a.d(t,{AF:()=>P,Cm:()=>j,G3:()=>V,Kt:()=>H,Pr:()=>D,iq:()=>R,mS:()=>O,tJ:()=>B});var n=a(411855),l=a(188507);if(443==a.j)var r=a(140593);if(443==a.j)var i=a(543509);if(443==a.j)var o=a(434236);if(443==a.j)var s=a(352074);var c=a(629019),m=a.n(c),d=a(983405),u=a(136189),p=a(844882);if(443==a.j)var _=a(846995);var h=a(454475),g=a(579557),E=a(301929),f=a(598754),b=a(819635),v=a(754468),w=a(373731),y=a(748581),I=a(345202),T=a(438476),C=a(546619),S=a(43166),k=a(599698),F=a(311807),N=a(11792),x=a(41655),L=a(981138),A=a(594816);function R(e){return n.createElement("div",{className:A.sk},e.children)}function O({template:e}){let t=(0,I.Um)(),{primaryKey:a}=(0,w.fG)()(e);return t?.type===L.hx&&t?.data?.templatePrimaryKey===a&&t.data?.position?n.createElement(M,{template:e,position:t.data.position}):null}function M({template:e,position:t}){let a=(0,l.wA)(),{viewSourceFileUrl:r,duplicateLink:i,primaryKey:s}=(0,w.fG)()(e),c=e.type===S.n.TeamTemplate,m=(0,p.Rs)(C.sMs,{key:s},{enabled:c});return n.createElement(h.ms,{style:{...t,position:"fixed"}},n.createElement(h.c$,{onClick:()=>{a(b.oB()),a(f.S({url:i}))}},(0,E.tx)("browse_templates_modal.context_menu.copy_link")),r&&c&&n.createElement(h.c$,{onClick:()=>{a(b.oB()),u.Ay.redirect(r,"_blank")},disabled:"loading"===m.status||"disabled"===m.status||!m.data?.file?.hasPermission},n.createElement(d.Y1,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",spacing:8},n.createElement("span",null,(0,E.tx)("browse_templates_modal.context_menu.view_original_file")),n.createElement("span",{className:g.cx.if("loading"!==m.status,g.cx.invisible).$},n.createElement(o.k,null)))))}function P(e){let{clientMeta:t,imageUrl:a,thumbnailIsSet:l,isWhiteboard:r,name:i,publishers:o,hubFileId:s,resizedThumbnailUrls:c}=(0,w.fG)()(e.template),m=(0,L.jq)(e.template),d=(0,F.Td)();return n.createElement(n.Fragment,null,n.createElement(k.zq,{onContextMenu:m,image:n.createElement(k.FK,{backgroundColor:(0,y.Cn)(t)},n.createElement(k.zx.Cover,null,n.createElement("button",{className:A.n_,onClick:e.onInsert,disabled:e.isInsertingTemplate||d})),n.createElement(k.zx.Center,null,n.createElement(N.i,{insertTemplate:e.onInsert,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0},(0,T.Ve)(e.templateInsertionLocation))),n.createElement(x.Ho,{image:a,isSet:l,isWhiteboard:r,hubFileId:s,alt:i,resizedThumbnailUrls:c})),bottomRow:n.createElement(k.Wf.FullMetadata,{name:i,publishers:o,hoverText:e.onPreview?(0,E.t)("browse_templates_modal.view_details"):void 0,onClick:e.onPreview||_.lQ})}),n.createElement(O,{template:e.template}))}function D(e){let t=(0,l.d4)(t=>t.hubFiles[e.hubFileId]);return n.createElement(P,{template:{template:t,type:S.n.HubFile},onInsert:()=>e.onInsert({template:t,type:S.n.HubFile}),isInsertingTemplate:e.isInsertingTemplate,onPreview:e.previewHubFile,templateInsertionLocation:e.templateInsertionLocation})}function B({url:e,fileKey:t}){return n.createElement(s.N.Button,{href:e,newTab:!0,onClick:()=>{(0,v.Cu)({fileKey:t,uiSelectedView:"see_more_button",name:"Templates Modal Browse More"},"cta_clicked")},variant:"secondary"},(0,E.tx)("browse_templates_modal_content.see_more_in_community"))}function W(){return n.createElement("div",{className:g.cx.flex.itemsCenter.h40.my8.wFull.$},n.createElement(U,null))}function U(){return n.createElement("div",{className:m()(g.cx.w100.h16.bRadius3.$,A.Mm)})}function G({lightness:e="normal"}){let t=function(e){switch(e){case"normal":return A.Mm;case"light":return A.EQ;case"lightest":return A.Y;default:(0,r.xb)(e)}}(e);return n.createElement(k.zq,{image:n.createElement(k.FK,{removeBorder:!0},n.createElement("div",{className:m()(t,g.cx.wFull.hFull.$)})),bottomRow:n.createElement("div",{className:m()(t,g.cx.h16.w100.bRadius3.$)})})}function z({shouldFade:e}){return n.createElement(n.Fragment,null,(0,i.y1)(3).map(t=>{let a="normal";return e&&(a=2===t?"lightest":1===t?"light":"normal"),n.createElement(G,{key:t,lightness:a})}))}function H(){return n.createElement("div",{className:g.cx.px24.$},n.createElement(W,null),n.createElement(R,null,n.createElement(z,null),n.createElement(z,null),n.createElement(z,{shouldFade:!0})))}function V({shouldFade:e}){return n.createElement("div",{className:g.cx.pb20.$},n.createElement("div",{className:g.cx.h24.mb16.$},n.createElement(U,null)),n.createElement(R,null,n.createElement(z,{shouldFade:e})))}function j(){return n.createElement(d.Y1,{width:"fill-parent",height:"fill-parent",verticalAlignItems:"center",horizontalAlignItems:"center"},n.createElement(o.k,{size:"lg"}))}},863302:(e,t,a)=>{a.d(t,{Ht:()=>E,O9:()=>f});var n=a(411855),l=a(188507),r=a(89402),i=a(579557),o=a(231819),s=a(301929),c=a(961714),m=a(764554);if(443==a.j)var d=a(976549);var u=a(757426),p=a(15544),_=a(752722);let h="team_template_card_view_count",g=()=>{if(!r.x4)return;let e=parseInt(r.x4.getItem(h)||"0");r.x4.setItem(h,""+ ++e)};function E({fullWidth:e=!1}){return n.createElement("div",{className:i.cx.flex.flexColumn.itemsCenter.mxAuto.gap12.alignCenter.justifyCenter.$,style:{width:e?"100%":"360px",paddingTop:"100px"}},n.createElement("div",null,n.createElement(_.$z,{size:_.IX.MEDIUM,useCurrentFileAsThumbnail:!1})),n.createElement("div",{className:i.cx.font13.fontSemiBold.$},(0,s.tx)("whiteboard.inserts.custom_templates_header")),n.createElement("div",null,(0,s.tx)("whiteboard.inserts.custom_templates_description")),n.createElement(o.pW,{newTab:!0,href:d.A},(0,s.tx)("whiteboard.inserts.learn_more")))}function f({applyInsertStyling:e,applyNarrowStyling:t}){let a=(0,p.f)("dismissed_team_template_announcement_card"),i=(0,l.wA)(),o=(0,u.tS)(),s=(0,n.useCallback)(()=>{i(m.b({dismissed_team_template_announcement_card:!0})),localStorage.removeItem(h)},[i]),c=parseInt(r.x4?.getItem(h)||"0");return((0,n.useEffect)(()=>{!a&&c>=10&&s()},[a,c,s]),o&&c<10&&!a)?n.createElement(b,{applyInsertStyling:e,applyNarrowStyling:t,onDismiss:s}):null}function b({applyInsertStyling:e,applyNarrowStyling:t,onDismiss:a}){return(0,n.useEffect)(()=>{g()},[]),n.createElement("div",{className:i.cx.bRadius5.flex.flexRow.itemsStart.gap12.itemsCenter.p18.colorBgSecondary.mb20.if(e,i.cx.m24).if(t,i.cx.m12.p12.pt16.mb12).$,"data-testid":"teamplates-announcement-card"},n.createElement("div",null,n.createElement(_.$z,{size:t?_.IX.SMALL:_.IX.MEDIUM,useCurrentFileAsThumbnail:!1})),n.createElement("div",{className:i.cx.flex.flexColumn.justifyBetween.$},n.createElement("div",{className:i.cx.font13.fontSemiBold.pb8.$},(0,s.tx)("whiteboard.inserts.custom_templates_header")),n.createElement("div",null,(0,s.tx)("whiteboard.inserts.custom_templates_description")),n.createElement("div",{className:i.cx.flex.gap8.pt16.$},n.createElement(o.pW,{newTab:!0,href:d.A},(0,s.tx)("whiteboard.inserts.learn_more")),n.createElement(c.V,{onClick:a},(0,s.tx)("whiteboard.inserts.dismiss")))))}},98140:(e,t,a)=>{a.d(t,{DL:()=>N,Z0:()=>L,fc:()=>x,yB:()=>A});var n=a(411855),l=a(561546),r=a(629019),i=a.n(r),o=a(474474),s=a(454475),c=a(135624),m=a(171946),d=a(579557),u=a(301929),p=a(390816),_=a(757426),h=a(373731),g=a(225105),E=a(193772),f=a(871233),b=a(255488),v=a(739664),w=a(863302),y=a(334826),I=a(552019);if(443==a.j)var T=a(400645);var C=a(105193),S=a(594816);if(443==a.j)var k=a(949207);if(443==a.j)var F=a(432023);function N({filterOptions:e,selectedIds:t,isMyTeamsOnly:a,onFilterChange:r,userTeamOrWorkspaceIds:i,showWorkspaces:o,rightAlignOptions:c=!0}){let m=new Set(t||e.map(e=>e.id)),h=[],g=[],E=[],f=!1;for(let t of e)m.has(t.id)&&E.push(t),(0,_.qI)(t)?f=!0:i.has(t.id)?h.push(t):g.push(t);(0,l.KQ)(h,"name"),(0,l.KQ)(g,"name");let w=h.filter(e=>m.has(e.id)),y=g.filter(e=>m.has(e.id)),I=function({filterOptionsCount:e,userMemberFilterOptionsSelected:t,userNonMemberFilterOptionsSelected:a,isMyTeamsOnly:n,showWorkspaces:l,unassignedTeamsSelected:r}){let i=[...t,...a],o=i.length+(r?1:0);return 0===o?(0,u.t)("browse_templates_modal.none_selected"):o===e?l?n?(0,u.t)("browse_templates_modal.my_teams_only"):(0,u.t)("browse_templates_modal.all_workspaces"):(0,u.t)("browse_templates_modal.all_teams"):1===o?r?(0,u.t)("browse_templates_modal.other_teams"):i[0].name:(0,u.t)("browse_templates_modal.first_name_count_more",{count:o-1,firstName:i[0].name})}({filterOptionsCount:e.length,userMemberFilterOptionsSelected:w,userNonMemberFilterOptionsSelected:y,showWorkspaces:o,isMyTeamsOnly:a,unassignedTeamsSelected:m.has(b.s)}),T=(e,t)=>{r({ids:e?E.reduce((e,a)=>a.id===t.id?e:[...e,a.id],[]):[...E.map(e=>e.id),t.id],myTeamsOnly:a})},C=(e,t)=>{let n=new Set(m);e.forEach(e=>{t?n.add(e.id):n.delete(e.id)}),r({ids:Array.from(n),myTeamsOnly:a})},S=[];if(o){if(S.push(...[...h,...g].filter(e=>!!e.id).map(e=>{let t=m.has(e.id);return n.createElement(s.rr,{key:e.id||e.name,checked:t,onClick:()=>{T(t,e)},displayType:s.Jn.Checkbox},e.name)})),S.length&&S.unshift(n.createElement(s.wv,{key:"my-teams-only-separator"})),S.unshift(n.createElement(s.rr,{key:"my-teams-only",checked:a,onClick:()=>r({ids:t,myTeamsOnly:!a}),displayType:s.Jn.Checkmark},(0,u.tx)("browse_templates_modal.my_teams_only"))),f){let e=m.has(b.s);S.push(n.createElement(s.wv,{key:"unassigned-teams-separator"}),n.createElement(s.rr,{key:"unassigned-teams",checked:e,onClick:()=>{T(e,{id:b.s})},displayType:s.Jn.Checkbox},(0,u.tx)("browse_templates_modal.other_teams")))}}else h.length>0&&S.push(n.createElement(s.rr,{displayType:s.Jn.Checkbox,key:"my-teams",checked:h.length===w.length,mixed:h.length>w.length&&w.length>0,onClick:()=>{C(h,w.length<h.length)}},(0,u.tx)("browse_templates_modal.my_teams"))),S.push(...h.map(e=>{let t=m.has(e.id);return n.createElement(s.rr,{key:e.id||e.name,checked:t,onClick:()=>{T(t,e)},displayType:s.Jn.Checkbox,nested:!0},e.name)})),h.length>0&&g.length>0&&S.push(n.createElement(s.wv,{key:"other-teams-separator"})),g.length>0&&S.push(n.createElement(s.rr,{key:"other-teams",displayType:s.Jn.Checkbox,checked:g.length===y.length,mixed:g.length>y.length&&y.length>0,onClick:()=>{C(g,y.length<g.length)}},(0,u.tx)("browse_templates_modal.all_others"))),S.push(...g.map(e=>{let t=m.has(e.id);return n.createElement(s.rr,{key:e.id||e.name,checked:t,onClick:()=>{T(t,e)},displayType:s.Jn.Checkbox,nested:!0},e.name)}));return S.length?n.createElement(p.Y,{spacing:0,width:"hug-contents"},n.createElement("span",{className:d.cx.colorTextSecondary.$},(0,u.tx)("browse_templates_modal.published_from")),n.createElement(s.Ve,{label:I,noBorder:!0,rightAlignOptions:c,stayOpenOnSelect:!0,optionsBelowSelector:!0,options:S,notDraggable:!0,noRightPadding:!0,menuTrackingContextName:v.e0.TEMPLATES_BROWSE_FILTERS,menuTrackingProperties:{isEnterpriseOrg:o}})):null}function x(e){let[t,a]=(0,n.useState)(!0),l=(0,n.useRef)(null),r=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{!0!==r.current||t||l.current?.scrollIntoView()},[t]),n.createElement("section",null,n.createElement("button",{className:i()(d.cx.wFull.alignLeft.sticky.top0.zIndexTemplateModalTeamName.font13.my8.h40.fontMedium.colorBg.$,S.MY),onClick:()=>a(!t),ref:l},n.createElement("h2",null,n.createElement(m.B,{className:d.cx.relative.inlineFlex.justifyCenter.colorIconTertiary.mx2.w16.$,style:{top:"-2px"},svg:t?k.A:F.A}),e.workspaceName&&n.createElement("span",{className:d.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName)),t&&n.createElement(n.Fragment,null,n.createElement("div",{className:d.cx.if(e.minimalSpacing,d.cx.px0.mb0,d.cx.px24.mb20).$},e.children),n.createElement(c.a,{"data-testid":`load-more-team-${e.teamId}`,onIntersectionChange:({isIntersecting:t})=>{t&&e.onRequestLoadMoreForTeam(e.teamId)}})),n.createElement(c.a,{onIntersectionChange:({isIntersecting:e})=>{r.current=e}}))}function L(e){return n.createElement("section",null,n.createElement("div",{className:i()(d.cx.borderBox.$,C.a0)},n.createElement("div",{className:C.bV},e.workspaceName&&n.createElement("span",{className:d.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName),e.onSeeAllClick&&n.createElement("button",{className:C.jy,onClick:e.onSeeAllClick},(0,u.tx)("whiteboard.inserts.see_all"))),n.createElement("div",{className:d.cx.if(e.minimalSpacing,d.cx.px0.mb0,d.cx.px24.mb20).$},e.children))}function A(e){let t=(0,n.useRef)(null),a=(0,g.sZ)(),l=(0,f.G7)(a),{filterOptions:r,selectedTeamOrWorkspaceOrLicenseGroupIds:i,isMyTeamsOnly:s,onFilterChange:m,requestLoadMore:b,requestLoadMoreForTeam:v,templatesByTeam:C,userTeamOrWorkspaceIds:S,isLoadingTeamTemplates:k}=(0,_.GR)(a,E._Y.WHITEBOARD),{filterOptions:F,selectedIds:A,isMyTeamsOnly:R,onFilterChange:O,requestLoadMoreForOrg:M,teamTemplates:P,userTeamOrWorkspaceIds:D,isLoading:B}=(0,_.L_)({orgId:a.id,areWorkspacesEnabled:l,editorType:E._Y.WHITEBOARD,numTemplatesPerTeam:6}),W=(0,o.kc)().pro_templates_lg,[U,G]=(0,n.useState)(null);if(U)return n.createElement(I.z,{teamId:U.teamId,teamName:U.name,templateInsertionLocation:e.templateInsertionLocation,isInsertingTemplate:e.isInsertingTemplate,onInsert:e.insertTemplate,onBackClick:()=>G(null)});let z=W?O:m,H=W?M:b,V=W?B:k,j=W?P:C;return n.createElement("div",{className:d.cx.wFull.$},n.createElement(p.Y,{horizontalAlignItems:"space-between",height:T.k,padding:{left:24,right:24},strokeWidth:{bottom:1},strokeColor:"default"},n.createElement("div",{className:d.cx.font13.fontMedium.$},(0,u.tx)("browse_templates_modal.published_by_current_org_name",{orgName:a.name})),n.createElement(N,{filterOptions:W?F:r,selectedIds:W?A:i,isMyTeamsOnly:W?R:s,onFilterChange:e=>{"function"==typeof t.current?.scroll&&t.current.scroll({top:0,behavior:"smooth"}),z(e)},userTeamOrWorkspaceIds:new Set(W?D:S),showWorkspaces:l})),0===j.length?W?B:V?n.createElement(y.Kt,null):n.createElement(w.Ht,null):n.createElement("section",{className:d.cx.overflowYScroll.$,ref:t,style:{height:`calc(100% - ${T.k}px)`}},j.map(({teamId:t,teamName:a,workspaceName:r,templates:i,totalTemplatesByTeam:o})=>{let s=n.createElement(y.iq,null,i.map(t=>n.createElement(y.AF,{templateInsertionLocation:e.templateInsertionLocation,key:(0,h.gp)(t),template:t,onInsert:()=>e.insertTemplate(t),isInsertingTemplate:e.isInsertingTemplate((0,h.gp)(t))})));return W?n.createElement(L,{key:t,teamName:a??"",workspaceName:l?r??"":null,teamId:t,onSeeAllClick:o>6?()=>{G({teamId:t,name:a??""})}:void 0},s):n.createElement(x,{key:t,teamName:a??"",workspaceName:l?r??"":null,teamId:t,onRequestLoadMoreForTeam:v},s)}),n.createElement(c.a,{"data-testid":"load-more-teams",className:d.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&H()}})))}},552019:(e,t,a)=>{a.d(t,{z:()=>E});var n=a(411855);if(443==a.j)var l=a(727466);if(443==a.j)var r=a(755020);var i=a(719900),o=a(135624),s=a(579557),c=a(301929),m=a(390816),d=a(757426),u=a(193772),p=a(43166),_=a(863302),h=a(334826);if(443==a.j)var g=a(400645);function E({teamId:e,teamName:t,templateInsertionLocation:a,onInsert:E,isInsertingTemplate:f,onBackClick:b}){let{requestLoadMoreForTeam:v,templatesByTeam:w}=(0,d.li)({teamId:e,editorType:u._Y.WHITEBOARD});return w?n.createElement("div",{className:s.cx.wFull.$},n.createElement(m.Y,{horizontalAlignItems:"start",height:g.k,strokeWidth:{bottom:1},strokeColor:"default",padding:{left:24,right:24}},b&&n.createElement(l.K,{"aria-label":(0,c.t)("general.back"),actionOnPointerDown:i.Ay.isIpad,onClick:b},n.createElement(r.C,null)),n.createElement("div",{className:s.cx.font13.fontMedium.$},(0,c.tx)("browse_templates_modal.published_by_current_org_name",{orgName:t}))),n.createElement("section",{className:s.cx.overflowYScroll.$,style:{height:`calc(100% - ${g.k}px)`}},n.createElement("div",{className:s.cx.px24.my20.$},n.createElement(h.iq,null,w.templates.map(e=>n.createElement(h.AF,{templateInsertionLocation:a,key:e.fileKey,template:{template:e,type:p.n.TeamTemplateLg},onInsert:()=>E({template:e,type:p.n.TeamTemplateLg}),isInsertingTemplate:f(e.fileKey)})))),n.createElement(o.a,{className:s.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&v()}}))):n.createElement(_.Ht,null)}},981138:(e,t,a)=>{a.d(t,{hx:()=>b,jq:()=>v,bg:()=>f});var n=a(411855),l=a(188507),r=a(838516),i=a(474474);a(415684);var o=a(301929),s=a(861300),c=a(667130),m=a(819635);a(727221);var d=a(754468),u=a(373731),p=a(556576),_=a(438476);a(193772);var h=a(52833),g=a(188098);a(43166);var E=a(204430);function f(e){let{templatesShelfType:t,source:a}=e,m=(0,l.wA)(),[u]=n.useState(()=>new g.Ef([],{keys:["name"]})),f=t||E.cS.FIGJAM_TEMPLATES_PICKER,b=s.sz.loadingKeyForPayload({shelfType:f}),v=(0,h.oh)(b),w=(0,h.mC)(b),y=(0,l.d4)(e=>e.hubFiles),I=(0,l.d4)(e=>e.communityHub.shelves[f]),T=(0,p.tS)(),C=i.Ay().user_data?.id,[S,k]=n.useState(""),[F,N]=n.useState([]),x=n.useMemo(()=>(I||[]).reduce((e,t)=>({...e,[t.id]:t.shelf_content.map(e=>e.id)}),{}),[I]),L=n.useMemo(()=>(I||[]).reduce((e,t)=>({...e,[t.id]:(0,o.Yd)(t.i18n_meta.title,t.title)}),{}),[I]),A=n.useMemo(()=>(I||[]).map(({id:e})=>e),[I]),R=n.useCallback(e=>{let t=y[e],n=(0,_.a6)(t);m(c.rL({hubFileId:e,hubFileName:n.name||"this file",openInNewTab:!0,source:a}))},[m,y,a]);return n.useEffect(()=>{v||w||m(s.sz({shelfType:f}))},[m,w,v,f]),n.useEffect(()=>{let e=Object.keys(x).reduce((e,t)=>[...e,...x[t]],[]).map(e=>(0,_.a6)(y[e]));u.set(e)},[x,y,u]),n.useEffect(()=>{let e;S?(e=[...new Set(e=u.search(S).map(e=>e.hub_file_id))],(0,d.Cu)({userId:C,fileKey:T,entry_point:"templates_modal",scope:"Templates Modal",files:0,private_plugins:0,private_widgets:0,public_plugins:0,public_widgets:0,projects:0,teams:0,users:0},"search_query_result")):e=[],N(e)},[S,C,T,u]),{templates:x,categoryTitles:L,hubFiles:y,isLoading:v,duplicateFile:R,fileKey:T,userId:C,setSearchQuery:n.useCallback((0,r.s)(k,300),[]),searchQuery:S,searchTemplatesResult:F,categoryIds:A,subcategories:n.useMemo(()=>{if(!I)return[];let e={activity:(0,o.t)("browse_templates_modal.subcategory.activity"),role:(0,o.t)("browse_templates_modal.subcategory.role")},t=[];return I.forEach(a=>{if(!a.shelf_meta.category)return;let n=a.shelf_meta.category,l=t.find(e=>e.id===n);l?l.categoryIds.push(a.id):t.push({id:n,title:e[n]||n,categoryIds:[a.id]})}),t},[I])}}a(554706);let b="templates_context_menu";function v(e){let t=(0,l.wA)(),{primaryKey:a}=(0,u.fG)()(e);return n.useCallback(e=>{e.preventDefault();let n={templatePrimaryKey:a,position:{top:e.clientY,left:e.clientX}};t(m.j7({type:b,data:n}))},[t,a])}},400645:(e,t,a)=>{a.d(t,{k:()=>n});let n=56},812925:(e,t,a)=>{a.d(t,{A:()=>n.A,D:()=>l});var n=a(843717),l=(e=>(e.NEW_FILE="NEW_FILE",e.NEW_RESOURCE="NEW_RESOURCE",e.NEW_FILE_DROPDOWN="NEW_FILE_DROPDOWN",e.PROJECT_OVERFLOW_MENU="PROJECT_OVERFLOW_MENU",e.NEW_TEAM="NEW_TEAM",e.NEW_PROJECT="NEW_PROJECT",e.IMPORT="IMPORT",e.INVITE="INVITE",e.SHARE="SHARE",e.FAVORITE="FAVORITE",e.LOG_OUT="LOG_OUT",e.CLAIM="CLAIM",e.NEW_WHITEBOARD_FILE="NEW_WHITEBOARD_FILE",e.VIEW_COMMUNITY_PROFILE="VIEW_COMMUNITY_PROFILE",e.REQUEST_TO_EDIT="REQUEST_TO_EDIT",e.JOIN_TEAM="JOIN_TEAM",e.UPGRADE_TO_TEAM_ADMIN="UPGRADE_TO_TEAM_ADMIN",e.DROPDOWN="DROPDOWN",e.VIEW_MEMBERS="VIEW_MEMBERS",e.TEAM_OVERFLOW_MENU="TEAM_OVERFLOW_MENU",e.VIEW_LIBRARIES="VIEW_LIBRARIES",e.NEW_SITE_FILE="NEW_SITE_FILE",e.GET_DESKTOP_APP="GET_DESKTOP_APP",e.ADD_TO_CHROMEBOOK="ADD_TO_CHROMEBOOK",e.REQUEST_SENT_DESIGN="REQUEST_SENT_DESIGN",e.REQUEST_SENT_WHITEBOARD="REQUEST_SENT_WHITEBOARD",e.REQUEST_SENT_ALL="REQUEST_SENT_ALL",e.SETTINGS="SETTINGS",e))(l||{})},920942:(e,t,a)=>{function n(){return null}a.d(t,{VO:()=>i,YA:()=>r,AJ:()=>l}),a(722263),a(582914),new(a(196632)).b({name:"litmus",dependencies:[],exports:[{glob:"components.ts",sideEffects:!1},{glob:"litmus_view_selector.ts",sideEffects:!1},{glob:"is_litmus.ts",sideEffects:!1}],friendFiles:[],routeHints:["litmus"],eslint:{rules:{"react/no-array-index-key":"off","@typescript-eslint/no-explicit-any":"off"}}});let l=n,r=n,i=n},87781:(e,t,a)=>{a.d(t,{OF:()=>r,e7:()=>n,oL:()=>l});let n=function(){return!1},l=function(){return!1},r=function(){return!1}},132786:(e,t,a)=>{function n(){return null}a.d(t,{BX:()=>i,S7:()=>s,YP:()=>r,lt:()=>l,mh:()=>o});let l=n,r=n,i=n,o=n,s=n},462014:(e,t,a)=>{a.d(t,{G:()=>m});var n=a(411855),l=a(629019),r=a.n(l),i=a(639818),o=a(579557),s=a(301929),c=a(876560);function m({location:e,overrideText:t,hoverStyleClassName:a,onMouseUp:l,onPointerUp:m}){let d=!!l||!!m,u=d?{dataTooltip:(0,s.t)("qa.learn_more"),dataTooltipType:c.Ib.TEXT,dataTooltipShowAbove:!0}:{};return n.createElement(i.Ex,{className:r()(o.cx.font11.fontNormal.h16.px4.b1.bRadius5.mr0.hFitContent.if(d,o.cx.cursorPointer).if("MODAL"===e||"FILE_BROWSER_BAR"===e||"SLIDES_REWRITE_MODAL"===e,o.cx.colorTextSecondary.colorBorder).if("SUMMARIZE_NUDGE"===e,o.cx.colorTextOnbrand.colorBorderBrand).if("SUMMARIZE_NUDGE_DISABLED"===e,o.cx.colorTextOnbrand.colorBorderDisabled).if("INLINE_TOOLBAR"===e,o.cx.colorTextMenuSecondary.colorBorderMenu).if("SLIDES_REWRITE_MODAL"===e,o.cx.textBodySmall).$,a),color:i.zE.INVERT,subtle:!0,text:t??(0,s.t)("whiteboard.ai_modal.beta_badge"),onMouseUp:l,onPointerUp:m,...u})}},86649:(e,t,a)=>{a.d(t,{S:()=>l});var n=a(263159);let l=(0,a(411855).memo)(function(e){return(0,n.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5.5 5a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 1 1 0v1a1.5 1.5 0 0 1-1.5 1.5h-5A1.5 1.5 0 0 1 4 10.5v-5A1.5 1.5 0 0 1 5.5 4h1a.5.5 0 0 1 0 1zm4.793 0H8.5a.5.5 0 0 1 0-1H12v3.5a.5.5 0 0 1-1 0V5.707L8.854 7.854a.5.5 0 1 1-.708-.708z",clipRule:"evenodd"})})})},679446:(e,t,a)=>{a.d(t,{F:()=>r});var n=a(263159),l=a(411855);let r=443==a.j?(0,l.memo)(function(e){return(0,n.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,n.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m12.257 9.312-5.758 3.455c-1.1.66-2.499-.132-2.499-1.415V4.648c0-1.282 1.4-2.075 2.499-1.415l5.758 3.455c.99.594.99 2.03 0 2.624m-.514-.857a.53.53 0 0 0 0-.91l-5.76-3.453A.65.65 0 0 0 5 4.648v6.704a.65.65 0 0 0 .984.557z",clipRule:"evenodd"})})}):null}}]);

//# debugId=e1cd4591-6217-5c4b-b8c1-0e461f668d85

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/afae7d2b4f05ba23b026b30107cbcbaf514c87f8/801-f6c5c1dc68af2e59.min.js.map